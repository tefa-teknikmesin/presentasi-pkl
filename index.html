<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sosialisasi PKL 2026 - SMKN 2 Tasikmalaya</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Sosialisasi Praktik Kerja Lapangan (PKL) 2026 Program Keahlian Teknik Mesin SMKN 2 Tasikmalaya. Informasi lengkap tentang persiapan, wilayah penempatan, dan perusahaan mitra.">
    <meta name="keywords" content="PKL, SMKN 2 Tasikmalaya, Teknik Mesin, Praktik Kerja Lapangan, SMK, Magang">
    <meta name="author" content="SMKN 2 Tasikmalaya">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Sosialisasi PKL 2026 - SMKN 2 Tasikmalaya">
    <meta property="og:description" content="Sosialisasi Praktik Kerja Lapangan 2026 Program Keahlian Teknik Mesin. Informasi persiapan PKL untuk siswa dan orang tua.">
    <meta property="og:image" content="cover_bg.webp">
    
    <!-- Theme Color for Mobile -->
    <meta name="theme-color" content="#0f172a">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Preconnect for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://unpkg.com">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    
    <!-- Leaflet Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
    <style>
        /* Base styles with performance hints */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: #f8fafc; overflow: hidden; }
        
        /* Accessibility - Focus visible states */
        :focus-visible { outline: 2px solid #f59e0b; outline-offset: 2px; }
        button:focus-visible, a:focus-visible { outline: 2px solid #f59e0b; outline-offset: 2px; }
        
        /* Skip link for keyboard users */
        .skip-link { position: absolute; top: -100%; left: 50%; transform: translateX(-50%); background: #f59e0b; color: #1e293b; padding: 10px 20px; border-radius: 8px; z-index: 9999; font-weight: 600; text-decoration: none; }
        .skip-link:focus { top: 10px; }
        
        .presentation { width: 100vw; height: 100vh; position: relative; overflow: hidden; }
        .slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; padding: 25px 40px; opacity: 0; transform: translateX(30px); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1); flex-direction: column; overflow-y: auto; overflow-x: hidden; will-change: opacity, transform; }
        .slide.active { display: flex; opacity: 1; transform: translateX(0); }
        .slide.exit { opacity: 0; transform: translateX(-30px); }
        
        /* Prefers reduced motion - respect user preferences */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
            html { scroll-behavior: auto; }
        }
        
        /* Animation keyframes */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInLeft { from { opacity: 0; transform: translateX(-30px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes fadeInRight { from { opacity: 0; transform: translateX(30px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        
        .slide.active .slide-header { animation: fadeInUp 0.6s ease-out 0.1s both; }
        .slide.active .content-left { animation: fadeInLeft 0.6s ease-out 0.2s both; }
        .slide.active .content-right { animation: fadeInRight 0.6s ease-out 0.3s both; }
        .slide.active .chart-container { animation: scaleIn 0.6s ease-out 0.3s both; }
        .slide.active .stat-card { animation: fadeInUp 0.5s ease-out both; }
        .slide.active .stat-card:nth-child(1) { animation-delay: 0.2s; }
        .slide.active .stat-card:nth-child(2) { animation-delay: 0.3s; }
        .slide.active .stat-card:nth-child(3) { animation-delay: 0.4s; }
        .slide.active .stat-card:nth-child(4) { animation-delay: 0.5s; }
        .slide.active .info-card { animation: fadeInUp 0.5s ease-out both; }
        .slide.active .info-card:nth-child(1) { animation-delay: 0.2s; }
        .slide.active .info-card:nth-child(2) { animation-delay: 0.3s; }
        .slide.active .info-card:nth-child(3) { animation-delay: 0.4s; }
        .slide.active .info-card:nth-child(4) { animation-delay: 0.5s; }
        
        /* Opening Slide with Cover Image */
        .slide-opening { 
            background: linear-gradient(135deg, rgba(30, 58, 95, 0.85) 0%, rgba(15, 23, 42, 0.9) 50%, rgba(30, 41, 59, 0.85) 100%),
                        url('cover_bg.webp') center/cover no-repeat;
            justify-content: center; align-items: center; text-align: center; padding: 40px;
        }
        .logo-row { display: flex; justify-content: center; align-items: center; gap: 25px; margin-bottom: 25px; }
        .logo-img { height: 70px; width: auto; filter: drop-shadow(0 4px 15px rgba(0,0,0,0.3)); }
        .logo-img.large { height: 90px; }
        .main-title { font-size: 2.4rem; font-weight: 800; background: linear-gradient(135deg, #f8fafc 0%, #94a3b8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; text-shadow: 0 2px 20px rgba(0,0,0,0.3); }
        .sub-title { font-size: 1.6rem; color: #f59e0b; font-weight: 700; margin-bottom: 8px; letter-spacing: 1px; }
        .school-name { font-size: 1.4rem; color: #e2e8f0; font-weight: 600; letter-spacing: 0.5px; }
        .year-badge { margin-top: 20px; padding: 10px 30px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 50px; font-size: 1rem; font-weight: 700; color: #1e293b; box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3); }
        
        .slide-header { margin-bottom: 15px; flex-shrink: 0; }
        .slide-number { font-size: 0.9rem; color: #f59e0b; font-weight: 600; margin-bottom: 3px; }
        .slide-title { font-size: 2rem; font-weight: 700; color: #f8fafc; margin-bottom: 4px; }
        .slide-subtitle { font-size: 1rem; color: #94a3b8; }
        
        .slide-content { flex: 1; display: flex; gap: 25px; overflow: hidden; min-height: 0; }
        .content-left, .content-right { flex: 1; display: flex; flex-direction: column; min-height: 0; overflow: auto; }
        .content-full { flex: 1; display: flex; flex-direction: column; min-height: 0; overflow: auto; }
        
        /* 3D Chart Container */
        .chart-container { 
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.9) 0%, rgba(15, 23, 42, 0.9) 100%);
            border-radius: 16px; padding: 20px; 
            border: 1px solid rgba(148, 163, 184, 0.15); 
            flex: 1; min-height: 280px; 
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05);
            position: relative;
        }
        .chart-container::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; height: 1px;
            background: linear-gradient(90deg, transparent, rgba(245, 158, 11, 0.3), transparent);
        }
        .chart-container canvas { max-width: 100% !important; max-height: 100% !important; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 12px; }
        .stat-card { background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border-radius: 12px; padding: 14px; border: 1px solid rgba(148, 163, 184, 0.1); text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .stat-value { font-size: 2.2rem; font-weight: 800; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .stat-label { font-size: 1rem; color: #94a3b8; margin-top: 3px; }
        
        .highlight-box { background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(217, 119, 6, 0.08) 100%); border: 1px solid rgba(245, 158, 11, 0.25); border-radius: 12px; padding: 16px; margin-bottom: 12px; }
        .highlight-box h3 { color: #f59e0b; font-size: 1.3rem; margin-bottom: 6px; }
        .highlight-box p { color: #e2e8f0; font-size: 1.1rem; line-height: 1.6; }
        
        .table-container { background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border-radius: 12px; padding: 12px; border: 1px solid rgba(148, 163, 184, 0.1); flex: 1; overflow: auto; box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .data-table { width: 100%; border-collapse: collapse; font-size: 1.05rem; }
        .data-table th { background: rgba(245, 158, 11, 0.15); padding: 10px 12px; text-align: left; font-weight: 600; color: #f59e0b; position: sticky; top: 0; }
        .data-table td { padding: 8px 12px; border-bottom: 1px solid rgba(148, 163, 184, 0.08); }
        .data-table tr:hover { background: rgba(245, 158, 11, 0.05); }
        
        .badge { display: inline-block; padding: 3px 10px; border-radius: 15px; font-size: 0.65rem; font-weight: 600; }
        .badge-success { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        .badge-warning { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
        .badge-info { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .badge-purple { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
        
        .key-points { background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border-radius: 12px; padding: 16px; border: 1px solid rgba(148, 163, 184, 0.1); box-shadow: 0 5px 20px rgba(0,0,0,0.2); }
        .key-point { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 12px; }
        .key-point:last-child { margin-bottom: 0; }
        .point-icon { width: 32px; height: 32px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.95rem; flex-shrink: 0; box-shadow: 0 3px 10px rgba(16, 185, 129, 0.3); }
        .point-text { font-size: 1.1rem; color: #e2e8f0; line-height: 1.6; }
        
        .info-cards { display: flex; flex-direction: column; gap: 10px; }
        .info-card { background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border-radius: 12px; padding: 14px 16px; border: 1px solid rgba(148, 163, 184, 0.1); display: flex; align-items: center; gap: 14px; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .info-icon { width: 44px; height: 44px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; flex-shrink: 0; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3); }
        .info-text h4 { font-size: 1.15rem; color: #f8fafc; margin-bottom: 3px; }
        .info-text p { font-size: 1rem; color: #94a3b8; }
        
        .slide-closing { background: linear-gradient(135deg, rgba(30, 58, 95, 0.9) 0%, rgba(15, 23, 42, 0.95) 50%, rgba(30, 41, 59, 0.9) 100%), url('cover_bg.webp') center/cover no-repeat; justify-content: center; align-items: center; text-align: center; }
        .closing-title { font-size: 2.2rem; font-weight: 800; background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 12px; }
        .closing-text { font-size: 1rem; color: #94a3b8; line-height: 1.5; margin-bottom: 25px; max-width: 650px; }
        .closing-stats { display: flex; justify-content: center; gap: 30px; margin-bottom: 25px; flex-wrap: wrap; }
        .closing-stat { text-align: center; background: rgba(30, 41, 59, 0.8); padding: 15px 25px; border-radius: 12px; border: 1px solid rgba(148, 163, 184, 0.1); }
        .closing-stat-value { font-size: 2rem; font-weight: 800; color: #f59e0b; }
        .closing-stat-label { font-size: 0.75rem; color: #94a3b8; }
        .thank-you { font-size: 1.2rem; color: #f8fafc; font-weight: 600; }
        
        /* Map Section */
        .map-section { display: flex; gap: 15px; flex: 1; min-height: 0; }
        .company-list-panel { width: 320px; display: flex; flex-direction: column; gap: 10px; overflow: visible; }
        .region-tabs { display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 10px; }
        .region-tab { padding: 6px 12px; background: rgba(30, 41, 59, 0.8); border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 20px; font-size: 0.85rem; cursor: pointer; transition: all 0.3s; color: #94a3b8; }
        .region-tab:hover, .region-tab.active { background: #f59e0b; color: #1e293b; border-color: #f59e0b; }
        .company-cards { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 5px; }
        .company-card { background: rgba(30, 41, 59, 0.8); border-radius: 10px; padding: 12px; border: 1px solid rgba(148, 163, 184, 0.1); cursor: pointer; transition: all 0.3s; flex-shrink: 0; }
        .company-card:hover { border-color: #f59e0b; transform: translateX(5px); }
        .company-card.selected { background: rgba(245, 158, 11, 0.2); border-color: #f59e0b; }
        .company-card h5 { color: #f8fafc; font-size: 0.95rem; margin-bottom: 4px; display: flex; align-items: center; gap: 6px; }
        .company-card h5 .marker { width: 10px; height: 10px; border-radius: 50%; flex-shrink: 0; }
        .company-card p { color: #94a3b8; font-size: 0.85rem; line-height: 1.4; }
        
        .map-panel { flex: 1; display: flex; flex-direction: column; gap: 10px; }
        .map-container { flex: 1; border-radius: 12px; overflow: hidden; border: 1px solid rgba(148, 163, 184, 0.2); min-height: 300px; }
        .map-container iframe { width: 100%; height: 100%; border: none; }
        .map-legend { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; padding: 10px; background: rgba(30, 41, 59, 0.8); border-radius: 10px; }
        .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.75rem; color: #94a3b8; }
        .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
        
        .nav-controls { position: fixed; bottom: 8px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; gap: 8px; z-index: 100; background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(8px); padding: 6px 12px; border-radius: 30px; border: 1px solid rgba(148, 163, 184, 0.15); }
        .nav-btn { width: 32px; height: 32px; background: rgba(30, 41, 59, 0.9); border: 1px solid rgba(148, 163, 184, 0.2); border-radius: 50%; color: #f8fafc; font-size: 0.85rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; }
        .nav-btn:hover { background: #f59e0b; color: #1e293b; }
        .slide-indicator { display: flex; gap: 4px; }
        .indicator-dot { width: 6px; height: 6px; background: rgba(148, 163, 184, 0.3); border-radius: 50%; cursor: pointer; transition: all 0.3s ease; }
        .indicator-dot.active { background: #f59e0b; width: 18px; border-radius: 4px; }
        
        .progress-bar { position: fixed; top: 0; left: 0; height: 3px; background: linear-gradient(90deg, #f59e0b 0%, #fbbf24 100%); z-index: 100; transition: width 0.3s ease; }
        
        /* Table Pagination Styles */
        .table-pagination { display: flex; justify-content: center; align-items: center; gap: 12px; margin-top: 10px; padding: 8px; background: rgba(30, 41, 59, 0.8); border-radius: 10px; }
        .page-btn { width: 30px; height: 30px; background: rgba(245, 158, 11, 0.2); border: 1px solid #f59e0b; border-radius: 50%; color: #f59e0b; font-size: 0.9rem; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; }
        .page-btn:hover { background: #f59e0b; color: #1e293b; }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .page-info { color: #94a3b8; font-size: 0.85rem; }




        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(30, 41, 59, 0.5); border-radius: 3px; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #f59e0b; }

        /* Mobile Responsive Styles */
        @media (max-width: 1024px) {
            .slide { padding: 20px 25px; }
            .slide-content { gap: 15px; }
            .company-list-panel { width: 280px; }
            .map-section { gap: 12px; }
        }

        @media (max-width: 768px) {
            /* Allow scrolling on mobile */
            body { overflow: auto; }
            .presentation { height: auto; min-height: 100vh; overflow: visible; }
            .slide { 
                position: relative; 
                height: auto; 
                min-height: 100vh; 
                padding: 15px 20px 60px 20px; /* Extra padding at bottom for nav */
                overflow: visible;
            }
            .slide.active { display: flex; }
            
            .slide-header { margin-bottom: 12px; }
            .slide-title { font-size: 1.5rem; }
            .slide-subtitle { font-size: 0.9rem; }
            .slide-number { font-size: 0.8rem; }
            
            /* Video container mobile */
            .video-container { min-height: 400px !important; }
            .video-container > div { min-height: 340px !important; }
            
            /* Hide speaker notes on mobile */
            .speaker-notes { display: none !important; }
            
            .slide-content { flex-direction: column; gap: 12px; }
            .content-left, .content-right { flex: none; width: 100%; }
            
            /* Map Section Mobile */
            .map-section { flex-direction: column; height: auto; min-height: auto; width: 100%; }
            .company-list-panel { width: 100% !important; max-width: 100% !important; max-height: none; min-height: auto; overflow: visible; margin-bottom: 20px; }
            .company-cards { max-height: 50vh; overflow-y: auto; min-height: 200px; border: 1px solid rgba(148, 163, 184, 0.2); padding-right: 0 !important; width: 100% !important; }
            .company-card { margin-right: 0; width: 100% !important; }
            .region-tabs { justify-content: center; flex-wrap: wrap; margin-bottom: 15px; }
            .region-tab { padding: 8px 14px; font-size: 0.85rem; }
            
            .map-panel { min-height: 300px !important; height: 300px; flex: none; width: 100%; }
            .map-container { min-height: 280px !important; height: 280px !important; }
            #leafletMap { min-height: 280px !important; height: 280px !important; touch-action: pan-y; }
            .map-legend { gap: 8px; padding: 8px; flex-wrap: wrap; }
            .legend-item { font-size: 0.75rem; }
            .legend-dot { width: 10px; height: 10px; }
            
            /* Navigation */
            .nav-controls { bottom: 10px; gap: 8px; }
            .nav-btn { width: 38px; height: 38px; font-size: 1rem; }
            .indicator-dot { width: 8px; height: 8px; }
            .indicator-dot.active { width: 20px; }
            
            /* Stats and cards */
            .stats-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
            .stat-card { padding: 14px; }
            .stat-value { font-size: 1.8rem; }
            .stat-label { font-size: 0.9rem; }
            
            /* Highlight box */
            .highlight-box h3 { font-size: 1.15rem; }
            .highlight-box p { font-size: 1rem; }
            
            /* Key points */
            .point-icon { width: 28px; height: 28px; font-size: 0.85rem; }
            .point-text { font-size: 1rem; }
            
            /* Info cards */
            .info-icon { width: 38px; height: 38px; font-size: 1.2rem; }
            .info-text h4 { font-size: 1rem; }
            .info-text p { font-size: 0.9rem; }
            
            /* Tables */
            .data-table { font-size: 0.95rem; }
            
            /* Charts - Tablet */
            .chart-container { 
                min-height: 220px; 
                padding: 15px; 
            }
            .chart-container canvas {
                max-height: 200px !important;
            }
        }

        @media (max-width: 480px) {
            .slide { 
                padding: 12px 15px 55px 15px; /* Extra padding at bottom for nav */
            }
            .slide-title { font-size: 1.2rem; }
            .slide-subtitle { font-size: 0.75rem; }
            .slide-number { font-size: 0.7rem; }
            
            /* Video container mobile small */
            .video-container { min-height: 350px !important; }
            .video-container > div { min-height: 290px !important; }
            
            /* Slide content stacking */
            .slide-content { 
                flex-direction: column; 
                gap: 10px;
            }
            .content-left, .content-right { 
                flex: none; 
                width: 100%; 
                min-height: auto;
            }
            
            /* Charts - Mobile */
            .chart-container { 
                min-height: 180px; 
                max-height: 220px;
                padding: 12px; 
                margin-bottom: 8px;
            }
            .chart-container canvas {
                max-height: 160px !important;
            }
            
            /* Stats Grid on Mobile - 2x2 compact */
            .stats-grid { 
                grid-template-columns: repeat(2, 1fr); 
                gap: 6px; 
                margin-bottom: 8px;
            }
            .stat-card { 
                padding: 10px 8px; 
            }
            .stat-value { font-size: 1.4rem; }
            .stat-label { font-size: 0.75rem; }
            
            /* Map Section Mobile Small */
            .map-section { min-height: 520px; }
            .company-list-panel { max-height: 300px; min-height: 220px; }
            .company-cards { max-height: 220px; min-height: 160px; overflow-y: auto; }
            .company-card { padding: 8px; }
            .company-card h5 { font-size: 0.85rem; }
            .company-card p { font-size: 0.75rem; }
            .region-tab { padding: 5px 8px; font-size: 0.75rem; }
            
            .map-panel { height: 220px !important; min-height: 220px !important; flex: none; }
            .map-container { height: 200px !important; min-height: 200px !important; }
            #leafletMap { height: 200px !important; min-height: 200px !important; touch-action: none; }
            
            .map-legend { flex-wrap: wrap; gap: 8px; }
            .legend-item { font-size: 0.8rem; }
            
            /* Highlight box - Compact */
            .highlight-box { padding: 12px; margin-bottom: 8px; }
            .highlight-box h3 { font-size: 1rem; }
            .highlight-box p { font-size: 0.85rem; line-height: 1.4; }
            
            /* Key points - Compact */
            .key-points { padding: 12px; }
            .key-point { padding: 0; margin-bottom: 8px; gap: 8px; }
            .point-icon { width: 24px; height: 24px; font-size: 0.75rem; }
            .point-text { font-size: 0.85rem; line-height: 1.4; }
            
            /* Info cards - Compact */
            .info-cards { gap: 6px; }
            .info-card { padding: 10px; gap: 8px; }
            .info-icon { width: 32px; height: 32px; font-size: 1rem; }
            .info-text h4 { font-size: 0.85rem; }
            .info-text p { font-size: 0.75rem; }
            
            /* Tables - Compact */
            .table-container { padding: 10px; }
            .data-table { font-size: 0.8rem; }
            .data-table th, .data-table td { padding: 6px 8px; }
            .badge { font-size: 0.6rem; padding: 2px 6px; }
            
            /* Closing slide */
            .closing-title { font-size: 1.4rem; }
            .closing-text { font-size: 0.85rem; max-width: 100%; }
            .closing-stats { 
                gap: 10px; 
                flex-wrap: wrap;
                justify-content: center;
            }
            .closing-stat { 
                padding: 10px 15px; 
                min-width: 70px;
            }
            .closing-stat-value { font-size: 1.4rem; }
            .closing-stat-label { font-size: 0.7rem; }
            
            /* Navigation on mobile */
            .nav-controls { bottom: 8px; }
            .nav-btn { width: 32px; height: 32px; font-size: 0.9rem; }
        }

        /* Extra small screens (below 360px) */
        @media (max-width: 360px) {
            .slide { padding: 10px 12px; }
            .slide-title { font-size: 1.2rem; }
            .slide-subtitle { font-size: 0.75rem; }
            
            .chart-container { 
                min-height: 150px; 
                max-height: 180px;
                padding: 10px;
            }
            .chart-container canvas {
                max-height: 130px !important;
            }
            
            .stats-grid { gap: 5px; }
            .stat-card { padding: 8px 6px; }
            .stat-value { font-size: 1.2rem; }
            .stat-label { font-size: 0.65rem; }
            
            .highlight-box { padding: 10px; }
            .highlight-box h3 { font-size: 0.9rem; }
            .highlight-box p { font-size: 0.75rem; }
            
            .key-point { margin-bottom: 6px; }
            .point-icon { width: 20px; height: 20px; font-size: 0.65rem; }
            .point-text { font-size: 0.75rem; }
            
            .info-card { padding: 8px; gap: 6px; }
            .info-icon { width: 28px; height: 28px; font-size: 0.9rem; }
            .info-text h4 { font-size: 0.75rem; }
            .info-text p { font-size: 0.65rem; }
            
            .closing-title { font-size: 1.2rem; }
            .closing-stat { padding: 8px 12px; }
            .closing-stat-value { font-size: 1.2rem; }
        }
    </style>
</head>
<body>
    <!-- Skip link for keyboard users -->
    <a href="#main-content" class="skip-link">Lewati ke Konten Utama</a>
    
    <!-- Screen reader announcements -->
    <div id="slideAnnouncer" aria-live="polite" aria-atomic="true" class="sr-only" style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0;"></div>
    
    <div class="progress-bar" id="progressBar"></div>


    <div class="presentation" id="main-content" role="main">
        <!-- SLIDE 1: Opening with Logos & Cover -->
        <div class="slide slide-opening active" data-notes="Assalamualaikum Wr. Wb. Selamat datang di acara sosialisasi PKL Tahun 2026. Presentasi ini menyajikan hasil survei dari 141 siswa Kelas XI Teknik Mesin.">
            <div>
                <div class="logo-row">
                    <img src="logo_tutwuri.webp" alt="Tut Wuri Handayani" class="logo-img">
                    <img src="logo_smkn2.webp" alt="SMKN 2 Tasikmalaya" class="logo-img large">
                    <img src="logo_teknik_mesin.webp" alt="Teknik Mesin" class="logo-img large">
                    <img src="logo_smk_bisa.webp" alt="SMK Bisa Hebat" class="logo-img" style="height: 55px;">
                </div>
                <h1 class="main-title">SOSIALISASI PERSIAPAN PRAKTIK KERJA LAPANGAN</h1>
                <h2 class="sub-title">PROGRAM KEAHLIAN TEKNIK MESIN</h2>
                <p class="school-name">SMK NEGERI 2 TASIKMALAYA</p>
                <div class="year-badge">23 DESEMBER 2025 - TAHUN AJARAN 2025/2026</div>
            </div>
        </div>

        <!-- SLIDE 2: Pembukaan & Visi Bersama dengan Video -->
        <div class="slide" data-notes="Sampaikan salam dan sambutan hangat kepada orang tua siswa. Jelaskan tujuan pertemuan ini.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 2 dari 10</div>
                <h2 class="slide-title">üôè Assalamualaikum Wr. Wb.</h2>
                <p class="slide-subtitle">Selamat Datang di Sosialisasi PKL SMKN 2 KOTA TASIKMALAYA - PROGRAM KEAHLIAN TEKNIK MESIN</p>
            </div>
            <div class="slide-content">
                <div class="content-left">
                    <div class="video-container" style="background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9)); border-radius: 16px; padding: 15px; border: 1px solid rgba(148, 163, 184, 0.15); display: flex; flex-direction: column; max-height: 1260px;">
                        <h4 style="color: #f59e0b; margin-bottom: 12px; font-size: 0.9rem;">üé¨ Profile Teknik Mesin SMKN 2 Tasikmalaya</h4>
                        <div id="videoWrapper" style="flex: 1; background: #0f172a; border-radius: 12px; overflow: hidden; position: relative; aspect-ratio: 16/9; width: 100%; max-height: 960px;">
                            <!-- Video from Google Drive - iframe embed with high quality -->
                            <iframe 
                                id="videoFrame"
                                src="https://drive.google.com/file/d/1YlT9R1uKU3bP6bO5FTa-VQc08ECUA5FX/preview" 
                                style="border: none; border-radius: 12px; position: absolute; top: 0; left: 0; width: 100%; height: 100%;"
                                allow="autoplay; encrypted-media; fullscreen"
                                allowfullscreen>
                            </iframe>
                            <!-- Fullscreen button overlay -->
                            <button onclick="openVideoFullscreen()" style="position: absolute; bottom: 12px; right: 12px; background: rgba(245, 158, 11, 0.9); border: none; border-radius: 8px; padding: 8px 14px; color: #1e293b; font-weight: 600; font-size: 0.8rem; cursor: pointer; display: flex; align-items: center; gap: 6px; z-index: 10; transition: all 0.3s;">
                                <span>‚õ∂</span> Fullscreen
                            </button>
                        </div>
                    </div>
                </div>
                <div class="content-right">
                    <div class="highlight-box" style="background: rgba(245, 158, 11, 0.1); padding: 20px; margin-bottom: 15px;">
                        <h3 style="font-size: 1.1rem; margin-bottom: 8px;">Selamat Datang</h3>
                        <p style="font-size: 0.95rem; line-height: 1.5;">Kepada Yth. <strong>Bapak/Ibu Wali Murid Kelas XI</strong><br>Program Keahlian Teknik Mesin<br>SMK Negeri 2 Kota Tasikmalaya</p>
                    </div>
                    <div class="key-points">
                        <h4 style="color: #f59e0b; margin-bottom: 12px; font-size: 0.9rem;">üéØ Tujuan Pertemuan Hari Ini</h4>
                        <div class="key-point"><div class="point-icon">1</div><div class="point-text"><strong>Mempersiapkan</strong> putra-putri Bapak/Ibu agar siap menghadapi tantangan di dunia industri melalui program Praktik Kerja Lapangan (PKL).</div></div>
                        <div class="key-point"><div class="point-icon">2</div><div class="point-text"><strong>Membangun koordinasi</strong> antara pihak sekolah dan orang tua dalam mendukung kelancaran pelaksanaan PKL tahun ajaran ini.</div></div>
                        <div class="key-point"><div class="point-icon">3</div><div class="point-text"><strong>Menyampaikan</strong> hasil survei kesiapan siswa serta informasi penting terkait penempatan, biaya, dan perusahaan mitra.</div></div>
                    </div>
                    <p style="margin-top: 20px; color: #94a3b8; font-size: 0.85rem; text-align: center;">Dukungan Bapak/Ibu sangat berarti bagi kesuksesan anak-anak kita üí™</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Rencana Karir -->
        <div class="slide" data-notes="Hasil survei menunjukkan 90,8% siswa berencana langsung bekerja setelah lulus. Program PKL menjadi langkah strategis untuk mempersiapkan mereka.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 3 dari 10</div>
                <h2 class="slide-title">Rencana Karir Setelah Lulus</h2>
                <p class="slide-subtitle">Gambaran Pilihan Masa Depan Berdasarkan Survei 141 Siswa</p>
            </div>
            <div class="slide-content">
                <div class="content-left">
                    <div class="chart-container"><canvas id="careerChart"></canvas></div>
                </div>
                <div class="content-right">
                    <!-- Stats grid at top with larger fonts -->
                    <div class="stats-grid" style="margin-bottom: 12px;">
                        <div class="stat-card"><div class="stat-value" style="font-size: 2.5rem;">128</div><div class="stat-label" style="font-size: 1.1rem;">Langsung Bekerja</div></div>
                        <div class="stat-card"><div class="stat-value" style="font-size: 2.5rem;">9</div><div class="stat-label" style="font-size: 1.1rem;">Melanjutkan Kuliah</div></div>
                        <div class="stat-card"><div class="stat-value" style="font-size: 2.5rem;">4</div><div class="stat-label" style="font-size: 1.1rem;">Berwirausaha</div></div>
                        <div class="stat-card"><div class="stat-value" style="font-size: 2.5rem;">141</div><div class="stat-label" style="font-size: 1.1rem;">Total Responden</div></div>
                    </div>
                    <!-- Key points in middle -->
                    <div class="key-points" style="margin-bottom: 12px;">
                        <div class="key-point"><div class="point-icon">‚úì</div><div class="point-text">PKL memberikan pengalaman kerja nyata yang menjadi modal berharga saat melamar pekerjaan.</div></div>
                        <div class="key-point"><div class="point-icon">‚úì</div><div class="point-text">Siswa dapat mengaplikasikan ilmu yang dipelajari di sekolah ke dalam praktik di industri.</div></div>
                        <div class="key-point"><div class="point-icon">‚úì</div><div class="point-text">Banyak perusahaan mitra yang merekrut langsung dari siswa PKL berprestasi.</div></div>
                    </div>
                    <!-- Highlight box at bottom -->
                    <div class="highlight-box">
                        <h3>üéØ Hasil Survei</h3>
                        <p>Sebanyak <strong>90,8%</strong> atau 128 dari 141 siswa memilih untuk <strong>langsung bekerja</strong> setelah lulus SMK.</p>
                        <p style="margin-top: 8px; font-size: 0.95rem; color: #94a3b8; line-height: 1.5;">Data ini menunjukkan bahwa sebagian besar siswa Program Keahlian Teknik Mesin memiliki orientasi yang jelas terhadap dunia kerja.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: Wilayah PKL -->
        <div class="slide" data-notes="Sebanyak 42,5% siswa memilih PKL di Kota Tasikmalaya, sedangkan 57,5% lainnya memilih luar kota seperti Bandung, Cikarang, dan Karawang.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 4 dari 10</div>
                <h2 class="slide-title">Sebaran Wilayah Penempatan PKL</h2>
                <p class="slide-subtitle">Distribusi Lokasi Praktik Kerja Lapangan yang Dipilih Siswa</p>
            </div>
            <div class="slide-content">
                <div class="content-left">
                    <div class="chart-container"><canvas id="regionChart"></canvas></div>
                </div>
                <div class="content-right">
                    <div class="highlight-box">
                        <h3>üìç Informasi Penting</h3>
                        <p>Sebanyak <strong>57,5% siswa memilih PKL di luar Kota Tasikmalaya</strong> ‚Äî diperlukan persiapan yang lebih matang.</p>
                        <p style="margin-top: 8px; font-size: 0.95rem; color: #94a3b8; line-height: 1.5;">Sebaran wilayah PKL terbagi menjadi dua kelompok utama: Kota Tasikmalaya (60 siswa) dan wilayah Bandung Raya (49 siswa). Beberapa siswa juga memilih kawasan industri seperti Cikarang dan Karawang yang menawarkan pengalaman di perusahaan manufaktur berskala besar.</p>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead><tr><th>Wilayah</th><th>Jumlah</th><th>Kategori</th></tr></thead>
                            <tbody>
                                <tr><td>Kota Tasikmalaya</td><td>60 (42.5%)</td><td><span class="badge badge-success">Lokal</span></td></tr>
                                <tr><td>Bandung Raya</td><td>49 (34.8%)</td><td><span class="badge badge-warning">Luar Kota</span></td></tr>
                                <tr><td>Cikarang</td><td>14 (9.9%)</td><td><span class="badge badge-info">Kawasan Industri</span></td></tr>
                                <tr><td>Karawang</td><td>8 (5.7%)</td><td><span class="badge badge-info">Kawasan Industri</span></td></tr>
                                <tr><td>Jakarta/Bekasi/Lainnya</td><td>10 (7.1%)</td><td><span class="badge badge-purple">Lainnya</span></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 5: Kesiapan -->
        <div class="slide" data-notes="Sebanyak 84,4% siswa sudah memiliki rencana tempat PKL dan 94,3% menyatakan bersedia melanjutkan magang jika diminta perusahaan.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 5 dari 10</div>
                <h2 class="slide-title">Tingkat Kesiapan Siswa</h2>
                <p class="slide-subtitle">Data Kesiapan Penempatan PKL dan Kesediaan Magang Lanjutan</p>
            </div>
            <div class="slide-content">
                <div class="content-left">
                    <div class="stats-grid">
                        <div class="stat-card"><div class="stat-value">84.4%</div><div class="stat-label">Sudah Punya Rencana</div></div>
                        <div class="stat-card"><div class="stat-value">94.3%</div><div class="stat-label">Bersedia Magang Lanjutan</div></div>
                    </div>
                    <div class="chart-container"><canvas id="readinessChart"></canvas></div>
                </div>
                <div class="content-right">
                    <div class="highlight-box">
                        <h3>‚úÖ Temuan Positif</h3>
                        <p>Mayoritas siswa telah mempersiapkan diri dengan baik untuk menghadapi program PKL.</p>
                        <p style="margin-top: 8px; font-size: 0.95rem; color: #94a3b8; line-height: 1.5;">Hasil survei menunjukkan bahwa sumber informasi PKL banyak berasal dari kakak tingkat (alumni) dan pencarian mandiri oleh siswa. Hal ini membuktikan bahwa jaringan alumni Teknik Mesin SMKN 2 Tasikmalaya tetap aktif membantu adik kelas dalam mempersiapkan penempatan PKL.</p>
                    </div>
                    <div class="key-points">
                        <h4 style="color: #f59e0b; margin-bottom: 10px; font-size: 0.85rem;">Sumber Informasi PKL:</h4>
                        <div class="key-point"><div class="point-icon">üîç</div><div class="point-text"><strong>Pencarian Mandiri:</strong> 45 siswa (31.9%)</div></div>
                        <div class="key-point"><div class="point-icon">üë•</div><div class="point-text"><strong>Rekomendasi Alumni:</strong> 38 siswa (27.0%)</div></div>
                        <div class="key-point"><div class="point-icon">üè´</div><div class="point-text"><strong>Informasi dari Sekolah:</strong> 26 siswa (18.4%)</div></div>
                        <div class="key-point"><div class="point-icon">üë®‚Äçüë©‚Äçüë¶</div><div class="point-text"><strong>Arahan Orang Tua:</strong> 24 siswa (17.0%)</div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: Kompetensi -->
        <div class="slide" data-notes="Keahlian Bubut Konvensional dikuasai oleh 73% siswa. Penempatan PKL akan disesuaikan dengan kompetensi masing-masing siswa.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 6 dari 10</div>
                <h2 class="slide-title">Kompetensi yang Dikuasai Siswa</h2>
                <p class="slide-subtitle">Distribusi Keahlian Teknik Berdasarkan Survei</p>
            </div>
            <div class="slide-content">
                <div class="content-left">
                    <div class="chart-container"><canvas id="competencyChart"></canvas></div>
                </div>
                <div class="content-right">
                    <div class="highlight-box">
                        <h3>üîß Keahlian Unggulan</h3>
                        <p><strong>Bubut Konvensional</strong> menjadi kompetensi yang paling banyak dikuasai oleh 73% siswa.</p>
                        <p style="margin-top: 8px; font-size: 0.95rem; color: #94a3b8; line-height: 1.5;">Bubut Konvensional merupakan keahlian dasar yang sangat penting dalam industri permesinan. Penempatan PKL akan diupayakan sesuai dengan kompetensi yang dimiliki siswa agar mereka dapat langsung berkontribusi secara optimal di tempat kerja.</p>
                    </div>
                    <div class="info-cards">
                        <div class="info-card"><div class="info-icon">üî©</div><div class="info-text"><h4>Bubut Konvensional</h4><p>Pembuatan komponen silinder seperti poros dan baut</p></div></div>
                        <div class="info-card"><div class="info-icon">‚öôÔ∏è</div><div class="info-text"><h4>Frais Konvensional</h4><p>Pengerjaan permukaan rata dan pembuatan alur</p></div></div>
                        <div class="info-card"><div class="info-icon">ü§ñ</div><div class="info-text"><h4>CNC (Bubut/Milling)</h4><p>Pengoperasian mesin berbasis kendali komputer</p></div></div>
                        <div class="info-card"><div class="info-icon">üî•</div><div class="info-text"><h4>Fabrikasi/Pengelasan</h4><p>Penyambungan dan pembentukan material logam</p></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 7: Logistik -->
        <div class="slide" data-notes="Sekitar 50,4% siswa membutuhkan tempat tinggal sementara (kost). Estimasi biaya bulanan berkisar antara Rp 1,75 - 2,9 juta.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 7 dari 10</div>
                <h2 class="slide-title">Persiapan Logistik PKL</h2>
                <p class="slide-subtitle">Informasi Akomodasi, Transportasi, dan Estimasi Biaya</p>
            </div>
            <div class="slide-content">
                <div class="content-left">
                    <!-- Tempat Tinggal Chart with title -->
                    <div class="chart-container" style="margin-bottom: 12px; position: relative;">
                        <h4 style="position: absolute; top: 8px; left: 12px; color: #f59e0b; font-size: 1rem; font-weight: 600; z-index: 5;">üè† Tempat Tinggal</h4>
                        <canvas id="accommodationChart"></canvas>
                    </div>
                    <!-- Transportasi Chart with title -->
                    <div class="chart-container" style="position: relative;">
                        <h4 style="position: absolute; top: 8px; left: 12px; color: #f59e0b; font-size: 1rem; font-weight: 600; z-index: 5;">üöó Transportasi</h4>
                        <canvas id="transportChart"></canvas>
                    </div>
                </div>
                <div class="content-right">
                    <div class="highlight-box">
                        <h3>üí∞ Estimasi Biaya (bagi siswa yang kost)</h3>
                        <p><strong>Per Bulan:</strong> Rp 1.750.000 - Rp 2.900.000<br><strong>Total 4 Bulan:</strong> Rp 7.000.000 - Rp 11.600.000</p>
                        <p style="margin-top: 8px; font-size: 0.95rem; color: #94a3b8; line-height: 1.5;">Estimasi ini bersifat umum dan dapat berbeda tergantung lokasi dan gaya hidup. Untuk keberangkatan, sebagian besar siswa akan diantar keluarga atau menggunakan transportasi umum.</p>
                    </div>
                    <div class="table-container">
                        <table class="data-table">
                            <thead><tr><th>Komponen Biaya</th><th>Estimasi/Bulan</th></tr></thead>
                            <tbody>
                                <tr><td>üè† Biaya Kost</td><td>Rp 500rb - 1jt</td></tr>
                                <tr><td>üçΩÔ∏è Konsumsi</td><td>Rp 900rb - 1,2jt</td></tr>
                                <tr><td>üöå Transportasi Lokal</td><td>Rp 200rb - 400rb</td></tr>
                                <tr><td>üì± Komunikasi/Internet</td><td>Rp 50rb - 100rb</td></tr>
                                <tr><td>üß¥ Kebutuhan Pribadi</td><td>Rp 100rb - 200rb</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 7: Daftar Perusahaan dengan Tabs -->
        <div class="slide" data-notes="Sekolah memiliki jaringan 75 perusahaan mitra. Klik tab untuk melihat daftar per wilayah.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 8 dari 10</div>
                <h2 class="slide-title">Daftar Lengkap 75 Perusahaan Mitra PKL</h2>
                <p class="slide-subtitle">Klik tab wilayah untuk melihat daftar perusahaan</p>
            </div>
            <div class="slide-content" style="flex-direction: column; gap: 10px;">
                <!-- Region Tabs -->
                <div class="region-tabs" id="companyTabs" style="justify-content: center;">
                    <button class="region-tab active" onclick="showCompanyTab('bandung')">üü° Bandung (27)</button>
                    <button class="region-tab" onclick="showCompanyTab('bekasi')">üîµ Bekasi (23)</button>
                    <button class="region-tab" onclick="showCompanyTab('tasik')">üü¢ Tasikmalaya (20)</button>
                    <button class="region-tab" onclick="showCompanyTab('ciamis')">üü£ Ciamis (6)</button>
                    <button class="region-tab" onclick="showCompanyTab('karawang')">üü† Karawang (3)</button>
                </div>
                <!-- Company Tables -->
                <div class="content-full" style="overflow: auto;">
                    <!-- BANDUNG Table -->
                    <div id="tab-bandung" class="company-tab-content">
                        <div class="table-container" style="height: 100%;">
                            <table class="data-table">
                                <thead><tr><th>No</th><th style="width: 35%;">Nama Perusahaan</th><th>Alamat</th></tr></thead>
                                <tbody>
                                    <tr><td>1</td><td>UPTD INDUSTRI LOGAM</td><td>Jl. Soekarno Hatta Km 12,5</td></tr>
                                    <tr><td>2</td><td>SINAR KARYA TUNGGAL</td><td>Jl. Anyelir 1 No. 16 Cipadung Kidul, Panyileukan</td></tr>
                                    <tr><td>3</td><td>PT. TRINDO PRATAMA</td><td>Jl. Sekejati no. 40 Sukapura, Kiaracondong</td></tr>
                                    <tr><td>4</td><td>PT. DIYORIFA CIPTA PERSADAS</td><td>Randu sari timur blok lepuji 3F Antapani Kidul</td></tr>
                                    <tr><td>5</td><td>PT. PINDAD</td><td>Jl. Terusan Gatot Sobroto no 517, Kiaracondong</td></tr>
                                    <tr><td>6</td><td>POLITEKNIK MANUFAKTUR BANDUNG</td><td>Jl. Kanayakan No.21, Dago, Coblong</td></tr>
                                    <tr><td>7</td><td>CV. RMT MANUFAKTUR</td><td>Komplek LIK B-25, Mekar Mulya, Panyileukan</td></tr>
                                    <tr><td>8</td><td>CV. MEKAR RAHAYU ABADI</td><td>Jl. Jend Amir Machmud no 111/115, Cibeureum-Cimahi</td></tr>
                                    <tr><td>9</td><td>PT. KARYA MANDIRI MANUFACTURE</td><td>Kaw. LIK Gede Bage unit B14 Mekarmulya</td></tr>
                                    <tr><td>10</td><td>PT. MULTI INSTRUMENTASI</td><td>Jl. Cinambo No.4 Pakemitan, Ujung Berung</td></tr>
                                    <tr><td>11</td><td>CV. JAYA MANDIRI TEKNIK</td><td>Kp. Babakan GBI, Jln. Raya Buahbatu, Bojongsoang</td></tr>
                                    <tr><td>12</td><td>CV. MANDIRI JAYA</td><td>Jln. Cisaranten Wetan 1 no. 143, Cinambo</td></tr>
                                    <tr><td>13</td><td>CV. MODULISA TEKNIK</td><td>Jln. Cipamokolan no. 2 Blok AA, Rancasari</td></tr>
                                    <tr><td>14</td><td>CV. SINAR KARYA NUNGGAL</td><td>Jln. Anyelir 2 No. 18 Cipadung Kidul, Panyileukan</td></tr>
                                    <tr><td>15</td><td>PT. DWI TUNGGAL METALINDO</td><td>Komp. Villa Cluster Margaluyu No. B-6, Buah batu</td></tr>
                                    <tr><td>16</td><td>PT. NIKATSU ELECTRIC WORKS</td><td>Jl. Cimuncang No.70, Pasirlayung, Cibeunying Kidul</td></tr>
                                    <tr><td>17</td><td>PT. PUDAK SCIENTIFIC</td><td>Jl. Mekar Raya Kav 12 Panyileukan</td></tr>
                                    <tr><td>18</td><td>BONMA TEKNIK</td><td>Jl. Babakan No.31 Magasetra Majalaya Kab. Bandung</td></tr>
                                    <tr><td>19</td><td>PT. BISMA PUTRA PERSADA</td><td>Jl. Terusan Nanjung Margasari Kab Bandung</td></tr>
                                    <tr><td>20</td><td>PT. DIRGANTARA INDONESIA</td><td>Jl. Pajajaran Bandung</td></tr>
                                    <tr><td>21</td><td>PT. DWITAMA MADYA PERSADA</td><td>Kaw. Industri de Prima, Jl. Raya Sopan No 07, Bojongsoang</td></tr>
                                    <tr><td>22</td><td>BBPPMPV Bidang Teknik Mesin</td><td>Jl. Pesantren No. KM, Cibabat, Cimahi</td></tr>
                                    <tr><td>23</td><td>PT. NEO PRIMA PUTRA</td><td>Katapang Bandung</td></tr>
                                    <tr><td>24</td><td>PT. NUSA JAYA</td><td>Kawasan Industri Primatera Sapan Gedebage</td></tr>
                                    <tr><td>25</td><td>PT. PARAMUDA</td><td>Kawasan Industri Primatera Sapan Gedebage</td></tr>
                                    <tr><td>26</td><td>PT. DWITAMA</td><td>Kawasan Industri Primatera Sapan Gedebage</td></tr>
                                    <tr><td>27</td><td>PT. TRIMETRIK</td><td>Kawasan Industri Primatera Sapan Gedebage</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- BEKASI Table -->
                    <div id="tab-bekasi" class="company-tab-content" style="display: none;">
                        <div class="table-container" style="height: 100%;">
                            <table class="data-table">
                                <thead><tr><th>No</th><th style="width: 35%;">Nama Perusahaan</th><th>Alamat</th></tr></thead>
                                <tbody>
                                    <tr><td>1</td><td>PT. SHINKOBE ENGINEERING</td><td>Jl. Cikarang-Cibarusah No. 100 Sukaresmi, Cikarang</td></tr>
                                    <tr><td>2</td><td>PT. NUSA TOYOTETSU CORP</td><td>MM 2100 Cikarang</td></tr>
                                    <tr><td>3</td><td>PT. DANO JAYA INDONESIA</td><td>Jl. Bantar Gebang Setu No 8, Mustika Jaya</td></tr>
                                    <tr><td>4</td><td>PT. HINOKA ALSINDO TEKNIK</td><td>Jl. Raya Siliwangi no 133</td></tr>
                                    <tr><td>5</td><td>PT. DERISTAMA TEKNINDO</td><td>Jababeka</td></tr>
                                    <tr><td>6</td><td>PT. KARTIKA SIGMA INDONESIA</td><td>Kawasan Industri Pulogadung Blok D No. 4, Jakarta Timur</td></tr>
                                    <tr><td>7</td><td>PT. RYOSHIN UNGGUL INDONESIA</td><td>Jalan Inti 3 Blok C11 No. 19, Cikarang Selatan</td></tr>
                                    <tr><td>8</td><td>PT. SEIDOTECH MANNA INDONESIA</td><td>Ruko Taman Galaxy Raya blok B no 289 B, Jaka Setia</td></tr>
                                    <tr><td>9</td><td>PT. PRIMERA MEKA MIX</td><td>Dizhub Tambun, Jl. Hasanudin KM 41 no 2 Block E</td></tr>
                                    <tr><td>10</td><td>PT. TEMBAGA MULIA SEMANAR</td><td>Jl. Daan Mogot KM 16, Semanan, Jakarta Barat</td></tr>
                                    <tr><td>11</td><td>PT. DINAMIK ERA MASAGI</td><td>Jl. Tegal Danas No 6 Jaya Mukti Cikarang</td></tr>
                                    <tr><td>12</td><td>PT. GLOBAL MEGA INDONESIA</td><td>Jl. Jababeka III blok C 17 no 17, Cikarang</td></tr>
                                    <tr><td>13</td><td>PT. REIKEN QUALITY TOOLS</td><td>Jl. Raya Serang-Cibarusah no 158 A</td></tr>
                                    <tr><td>14</td><td>PT. WAHANA DUTA JAYA RUCIKA</td><td>Jl. Raya Imam Bonjol KM 26 Sukadanau, Cikarang</td></tr>
                                    <tr><td>15</td><td>RIZKI CIPTA MANDIRI</td><td>Jl. Kavling Tandang Mandiri Blok 4 no 63, Setu</td></tr>
                                    <tr><td>16</td><td>BENGKEL PUTRA JAYA DRILINDO</td><td>Jln. Alhusna No. 12 Jati Kramat</td></tr>
                                    <tr><td>17</td><td>PT. KREATIF MANDIRI TEKNOLOGI</td><td>Jl. Raya Cicau Kawasan CCIP Blok K3 No. 6, Cikarang</td></tr>
                                    <tr><td>18</td><td>PT. MULTI JAYA MESINDOTAMA</td><td>Jl. Tegal Danas No.11, Hegarmanah, Cikarang Tim.</td></tr>
                                    <tr><td>19</td><td>PT. PATRIOT SELARAS TEKNIK</td><td>Jln. Kedaung, Cimuning, Mustika Jaya</td></tr>
                                    <tr><td>20</td><td>PT. TORAMA ASAHI MANDIRI</td><td>Kawasan Industri Jababeka II Blok Gg No 9 G</td></tr>
                                    <tr><td>21</td><td>PT. BUKAKA</td><td>Jl. Raya Narogong KM.23 No.18, Cileungsi, Bogor</td></tr>
                                    <tr><td>22</td><td>PT. DINAMIK ERA MASAGI (2)</td><td>Jl. Raya Tegal Danas No 6, Cikarang Pusat</td></tr>
                                    <tr><td>23</td><td>PT. DINAMIK ERA MASAGI (Cab)</td><td>Jl. Raya Tegal Danas, Jaya Mukti</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- TASIKMALAYA Table -->
                    <div id="tab-tasik" class="company-tab-content" style="display: none;">
                        <div class="table-container" style="height: 100%;">
                            <table class="data-table">
                                <thead><tr><th>No</th><th style="width: 35%;">Nama Perusahaan</th><th>Alamat</th></tr></thead>
                                <tbody>
                                    <tr><td>1</td><td>BENGKEL BUBUT DEDARI JAYA</td><td>Jl. Raya Mangin, Linggajaya, Mangkubumi</td></tr>
                                    <tr><td>2</td><td>BENGKEL 3 SAUDARA</td><td>Jl. Sambong Jaya No. 14, Sambongpari, Mangkubumi</td></tr>
                                    <tr><td>3</td><td>BENGKEL BERKAH TEKNIK</td><td>Jl. Setiawargi Kota Tasikmalaya</td></tr>
                                    <tr><td>4</td><td>BENGKEL BUBUT ACC</td><td>Jln. SL. Tobing No. 39 Tugu Jaya, Cihideung</td></tr>
                                    <tr><td>5</td><td>BENGKEL BUBUT SYAM FAMILY</td><td>Jln. Ir. H. Djuanda (Depan Gudang Garam)</td></tr>
                                    <tr><td>6</td><td>BENGKEL DUNAN COSTUM</td><td>Jln. Gubernur Swaka, Sambong Jaya</td></tr>
                                    <tr><td>7</td><td>BENGKEL FARID</td><td>Jl. Noenoeng Tisnasaputra, Kahuripan, Tawang</td></tr>
                                    <tr><td>8</td><td>BENGKEL LAS BERKAH MANDIRI</td><td>Jl. Rasamala No.18, Tawangsari, Tawang</td></tr>
                                    <tr><td>9</td><td>BENGKEL LAS BUBUT EBLEH</td><td>Jl. Dr. Moh. Hatta, Sukamanah, Cipedes</td></tr>
                                    <tr><td>10</td><td>BENGKEL LAS BUBUT TOSIN</td><td>Jln. Sambong Jaya (Dekat Gardu PLN)</td></tr>
                                    <tr><td>11</td><td>BENGKEL LAS JAYA BAJA</td><td>Jln. Sambong Jaya (Dekat Gardu PLN)</td></tr>
                                    <tr><td>12</td><td>BENGKEL LAS JEJEN</td><td>Jln. Gubernur Suwaka By Pass Sambong Asam</td></tr>
                                    <tr><td>13</td><td>BENGKEL LAS SAKURA JAYA</td><td>Jl. Siliwangi No.90, Kahuripan, Tawang</td></tr>
                                    <tr><td>14</td><td>BENGKEL LAS SULTAN WAWA</td><td>Jln. Ir. H. Djuanda By Pass, Perempatan Bojonglimus</td></tr>
                                    <tr><td>15</td><td>CV. MULIA ABADI</td><td>Jln. Sukanagara No. 8, Kahuripan, Tawang</td></tr>
                                    <tr><td>16</td><td>SENTRA LAS</td><td>Jln. Ir. H. Juanda Tasikmalaya</td></tr>
                                    <tr><td>17</td><td>BENGKEL BUBUT AAN</td><td>Jl. Raya Rajapolah No 334, Mekarwangi, Kab. Tasik</td></tr>
                                    <tr><td>18</td><td>PT. PERTAMINA GEOTHERMAL ENERGI</td><td>Kadipaten, Kab. Tasikmalaya</td></tr>
                                    <tr><td>19</td><td>AANG AIDA</td><td>Jl. Raya Rajapolah, Kab. Tasikmalaya</td></tr>
                                    <tr><td>20</td><td>BENGKEL FARID</td><td>Jl. Noenoeng Tisnasaputra, Kahuripan</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- CIAMIS Table -->
                    <div id="tab-ciamis" class="company-tab-content" style="display: none;">
                        <div class="table-container" style="height: 100%;">
                            <table class="data-table">
                                <thead><tr><th>No</th><th style="width: 35%;">Nama Perusahaan</th><th>Alamat</th></tr></thead>
                                <tbody>
                                    <tr><td>1</td><td>HARAPAN JAYA</td><td>JL. Baru Sindangkasih, Cikoneng, Ciamis</td></tr>
                                    <tr><td>2</td><td>B. LAS & BUBUT EGI JAPRA</td><td>Jl. Tubagus Abdullah, Sindangkasih, Purbaru</td></tr>
                                    <tr><td>3</td><td>LOST CONTROL</td><td>Jl. Pamayang, Cijeungjing</td></tr>
                                    <tr><td>4</td><td>CV MITRA TEKNIK</td><td>Psr Sindang Kasih, Cikoneng, Ciamis</td></tr>
                                    <tr><td>5</td><td>HARAPAN JAYA (Cab)</td><td>JL. Baru Sindangkasih, Cikoneng, Ciamis</td></tr>
                                    <tr><td>6</td><td>LATANZA JAYA TECH</td><td>Jl. Yos Sudarso No.87, Ciamis</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- KARAWANG Table -->
                    <div id="tab-karawang" class="company-tab-content" style="display: none;">
                        <div class="table-container" style="height: 100%;">
                            <table class="data-table">
                                <thead><tr><th>No</th><th style="width: 35%;">Nama Perusahaan</th><th>Alamat</th></tr></thead>
                                <tbody>
                                    <tr><td>1</td><td>PT. RODA PRIMA LANCAR</td><td>Jln. Inspeksi Tarum Barat, Parungmulya, Ciampel</td></tr>
                                    <tr><td>2</td><td>PT. JAYA INDUKSI ELEKTRIK</td><td>Pinayungan, Teluk Jambe, Karawang</td></tr>
                                    <tr><td>3</td><td>PT. KIYOKUNI TECHNOLOGIES</td><td>Kawasan Industri Surya Cipta, Karawang</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 8: Peta Interaktif -->
        <div class="slide" data-notes="Klik pada card perusahaan untuk melihat lokasi di peta Google Maps. Tersebar di Bandung, Cikarang, Tasikmalaya, dan wilayah lainnya.">
            <div class="slide-header">
                <div class="slide-number">SLIDE 9 dari 10</div>
                <h2 class="slide-title">üìç Peta Lokasi Perusahaan Mitra</h2>
                <p class="slide-subtitle">Klik pada card perusahaan untuk melihat lokasi di peta</p>
            </div>
            <div class="slide-content" style="flex-direction: column;">
                <!-- Region tabs - full width on top -->
                <div class="region-tabs" id="mapTabs" style="width: 100%; justify-content: center; margin-bottom: 12px;">
                    <button class="region-tab active" onclick="filterCompanies('all')">Semua (75)</button>
                    <button class="region-tab" onclick="filterCompanies('Bandung')">üü° Bandung (25)</button>
                    <button class="region-tab" onclick="filterCompanies('Cimahi')">üü° Cimahi (2)</button>
                    <button class="region-tab" onclick="filterCompanies('Bekasi')">üîµ Bekasi (20)</button>
                    <button class="region-tab" onclick="filterCompanies('Tasikmalaya')">üü¢ Tasikmalaya (19)</button>
                    <button class="region-tab" onclick="filterCompanies('Ciamis')">üü£ Ciamis (5)</button>
                    <button class="region-tab" onclick="filterCompanies('Karawang')">üü† Karawang (3)</button>
                </div>
                
                <!-- Map and List side by side -->
                <div class="map-section" style="flex: 1;">
                    <!-- Company list panel -->
                    <div class="company-list-panel" style="width: 320px; flex-shrink: 0;">
                        <div class="company-cards" id="companyCards" style="height: 100%;"></div>
                    </div>
                    
                    <!-- Map panel -->
                    <div class="map-panel" style="flex: 1;">
                        <div class="map-container" style="flex: 1;">
                            <div id="leafletMap" style="width: 100%; height: 100%; border-radius: 12px;">
                                <!-- Loading indicator -->
                                <div id="mapLoader" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 10;">
                                    <div style="width: 40px; height: 40px; border: 3px solid rgba(245, 158, 11, 0.3); border-top-color: #f59e0b; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 10px;"></div>
                                    <p style="color: #94a3b8; font-size: 0.8rem;">Memuat peta...</p>
                                </div>
                            </div>
                        </div>
                        <div class="map-legend">
                            <div class="legend-item"><div class="legend-dot" style="background: #f59e0b;"></div>Bandung/Cimahi (27)</div>
                            <div class="legend-item"><div class="legend-dot" style="background: #3b82f6;"></div>Bekasi (20)</div>
                            <div class="legend-item"><div class="legend-dot" style="background: #10b981;"></div>Tasikmalaya (19)</div>
                            <div class="legend-item"><div class="legend-dot" style="background: #ec4899;"></div>Ciamis (5)</div>
                            <div class="legend-item"><div class="legend-dot" style="background: #8b5cf6;"></div>Karawang (3)</div>
                            <div class="legend-item"><div class="legend-dot" style="background: #64748b;"></div>Jakarta/Bogor (3)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 10: Penutup -->
        <div class="slide slide-closing" data-notes="Penutup: Rangkuman data kesiapan siswa dan harapan sekolah kepada orang tua untuk mendukung kelancaran program PKL.">
            <div style="max-width: 750px;">
                <div class="logo-row" style="margin-bottom: 20px;">
                    <img src="logo_tutwuri.webp" alt="Tut Wuri Handayani" class="logo-img" style="height: 50px;">
                    <img src="logo_smkn2.webp" alt="SMKN 2 Tasikmalaya" class="logo-img" style="height: 65px;">
                    <img src="logo_teknik_mesin.webp" alt="Teknik Mesin" class="logo-img" style="height: 65px;">
                </div>
                <h1 class="closing-title">Bersama Mewujudkan Generasi Siap Kerja dan Berkarakter Baik</h1>
                <p class="closing-text">Dengan dukungan penuh dari Bapak/Ibu, kami yakin putra-putri kita akan sukses menjalani program Praktik Kerja Lapangan dan siap menghadapi dunia kerja yang sesungguhnya.</p>
                <div class="closing-stats">
                    <div class="closing-stat"><div class="closing-stat-value">90.8%</div><div class="closing-stat-label">Orientasi Kerja</div></div>
                    <div class="closing-stat"><div class="closing-stat-value">84.4%</div><div class="closing-stat-label">Sudah Punya Rencana</div></div>
                    <div class="closing-stat"><div class="closing-stat-value">94.3%</div><div class="closing-stat-label">Bersedia Magang Lanjut</div></div>
                    <div class="closing-stat"><div class="closing-stat-value">75</div><div class="closing-stat-label">Perusahaan Mitra</div></div>
                </div>
                <div class="key-points" style="text-align: left; margin-bottom: 20px;">
                    <h4 style="color: #f59e0b; margin-bottom: 10px; text-align: center;">ü§ù Peran Orang Tua dalam Kesuksesan PKL</h4>
                    <div class="key-point"><div class="point-icon">1</div><div class="point-text">Mendukung pilihan wilayah PKL yang telah didiskusikan bersama anak.</div></div>
                    <div class="key-point"><div class="point-icon">2</div><div class="point-text">Mempersiapkan kebutuhan logistik dan memberikan dukungan mental selama masa PKL.</div></div>
                    <div class="key-point"><div class="point-icon">3</div><div class="point-text">Menjaga komunikasi aktif dengan anak dan pihak sekolah selama program berlangsung.</div></div>
                </div>
                <p class="thank-you">üôè Terima Kasih atas Perhatian dan Kerjasamanya</p>
            </div>
        </div>
    </div>

    <div class="speaker-notes" id="speakerNotes"><h4>üìù Speaker Notes</h4><p id="notesContent"></p></div>
    
    <!-- Fullscreen Prompt Modal -->
    <div id="fullscreenPrompt" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(15, 23, 42, 0.95); display: flex; align-items: center; justify-content: center; z-index: 9999; backdrop-filter: blur(10px);">
        <div style="background: linear-gradient(145deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.98)); padding: 40px; border-radius: 20px; text-align: center; max-width: 400px; border: 1px solid rgba(245, 158, 11, 0.3); box-shadow: 0 20px 60px rgba(0,0,0,0.5);">
            <div style="font-size: 4rem; margin-bottom: 20px;">üì∫</div>
            <h2 style="color: #f59e0b; margin-bottom: 15px; font-size: 1.5rem;">Mode Presentasi</h2>
            <p style="color: #94a3b8; margin-bottom: 25px; font-size: 0.95rem;">Untuk pengalaman terbaik, aktifkan mode fullscreen</p>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button onclick="enterFullscreen()" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: #1e293b; border: none; padding: 12px 25px; border-radius: 10px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s;">üñ•Ô∏è Fullscreen</button>
                <button onclick="closePrompt()" style="background: rgba(100, 116, 139, 0.3); color: #f8fafc; border: 1px solid rgba(148, 163, 184, 0.3); padding: 12px 25px; border-radius: 10px; font-size: 1rem; cursor: pointer; transition: all 0.3s;">Lewati</button>
            </div>
        </div>
    </div>
    
    <nav class="nav-controls" role="navigation" aria-label="Navigasi Slide">
        <button class="nav-btn" onclick="toggleFullscreen()" title="Fullscreen (F)" aria-label="Toggle Fullscreen" style="font-size: 0.9rem;">‚õ∂</button>
        <button class="nav-btn" onclick="prevSlide()" title="Slide Sebelumnya (‚Üê)" aria-label="Slide Sebelumnya">‚Üê</button>
        <div class="slide-indicator" id="slideIndicator" role="tablist" aria-label="Slide indicator"></div>
        <button class="nav-btn" onclick="nextSlide()" title="Slide Selanjutnya (‚Üí atau Spasi)" aria-label="Slide Selanjutnya">‚Üí</button>
    </nav>

    <script>
        // Register Chart.js datalabels plugin
        Chart.register(ChartDataLabels);

        // Fullscreen functions
        function enterFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
            } else if (elem.msRequestFullscreen) {
                elem.msRequestFullscreen();
            }
            closePrompt();
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement) {
                enterFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                }
            }
        }
        
        function closePrompt() {
            document.getElementById('fullscreenPrompt').style.display = 'none';
        }
        
        // Handle 'F' key for fullscreen toggle
        document.addEventListener('keydown', (e) => {
            if (e.key === 'f' || e.key === 'F') {
                toggleFullscreen();
            }
        });

        // Company Data - Enriched with contact info and precise coordinates
        const companies = [
            // BANDUNG & CIMAHI (26)
            {name: "UPTD INDUSTRI LOGAM", address: "Jl. Soekarno Hatta Km 12.5, Mekar Mulya, Kec. Panyileukan", city: "Bandung", color: "#f59e0b", lat: -6.9351, lng: 107.6992, phone: "", email: ""},
            {name: "SINAR KARYA TUNGGAL", address: "Jl. Anyelir 1 No. 16, Cipadung Kidul, Kec. Panyileukan", city: "Bandung", color: "#f59e0b", lat: -6.9362, lng: 107.6985, phone: "", email: ""},
            {name: "PT. TRINDO PRATAMA", address: "Jl. Sekejati No. 40, Sukapura, Kec. Kiaracondong", city: "Bandung", color: "#f59e0b", lat: -6.9324, lng: 107.6471, phone: "", email: ""},
            {name: "PT. DIYORIFA CIPTA PERSADA", user_note: "Fixed typo PERSADAS", address: "Randusari Timur Blok Lepuji 3F, Antapani Kidul", city: "Bandung", color: "#f59e0b", lat: -6.9145, lng: 107.6582, phone: "", email: ""},
            {name: "PT. PINDAD (PERSERO)", address: "Jl. Gatot Subroto No. 517, Sukapura, Kec. Kiaracondong, Kota Bandung", city: "Bandung", color: "#f59e0b", lat: -6.9340, lng: 107.6491, phone: "+62 22 7312073", email: "info@pindad.com"},
            {name: "POLITEKNIK MANUFAKTUR BANDUNG", address: "Jl. Kanayakan No. 21, Dago, Kec. Coblong, Kota Bandung", city: "Bandung", color: "#f59e0b", lat: -6.8778, lng: 107.6214, phone: "+62 22 2500241", email: "sekretariat@polman-bandung.ac.id"},
            {name: "CV. RMT MANUFAKTUR", address: "Komplek LIK B-25, Mekar Mulya, Kec. Panyileukan", city: "Bandung", color: "#f59e0b", lat: -6.9371, lng: 107.6975, phone: "", email: ""},
            {name: "PT. KARYA MANDIRI MANUFACTURE", address: "Kawasan LIK Gede Bage Unit B14, Mekarmulya", city: "Bandung", color: "#f59e0b", lat: -6.9452, lng: 107.6951, phone: "", email: ""},
            {name: "PT. MULTI INSTRUMENTASI", address: "Jl. Cinambo No. 4, Pakemitan, Kec. Ujung Berung", city: "Bandung", color: "#f59e0b", lat: -6.9085, lng: 107.6923, phone: "+62 22 7800986", email: "marketing@multiinstrumentasi.co.id"},
            {name: "CV. JAYA MANDIRI TEKNIK", address: "Kp. Babakan GBI, Jl. Raya Buahbatu, Kec. Bojongsoang", city: "Bandung", color: "#f59e0b", lat: -6.9691, lng: 107.6365, phone: "", email: ""},
            {name: "CV. MANDIRI JAYA", address: "Jl. Cisaranten Wetan 1 No. 143, Cinambo", city: "Bandung", color: "#f59e0b", lat: -6.9102, lng: 107.6883, phone: "", email: ""},
            {name: "CV. MODULISA TEKNIK", address: "Jl. Cipamokolan No. 2 Blok AA, Kec. Rancasari", city: "Bandung", color: "#f59e0b", lat: -6.9481, lng: 107.6712, phone: "", email: ""},
            {name: "CV. SINAR KARYA NUNGGAL", address: "Jl. Anyelir 2 No. 18, Cipadung Kidul, Kec. Panyileukan", city: "Bandung", color: "#f59e0b", lat: -6.9355, lng: 107.6991, phone: "", email: ""},
            {name: "PT. DWI TUNGGAL METALINDO", address: "Komp. Villa Cluster Margaluyu No. B-6, Buahbatu", city: "Bandung", color: "#f59e0b", lat: -6.9592, lng: 107.6493, phone: "", email: ""},
            {name: "PT. NIKATSU ELECTRIC WORKS", address: "Jl. Cimuncang No. 70, Pasirlayung, Cibeunying Kidul", city: "Bandung", color: "#f59e0b", lat: -6.8995, lng: 107.6472, phone: "+62 22 7208182", email: "info@nikatsu.co.id"},
            {name: "PT. PUDAK SCIENTIFIC", address: "Jl. Mekar Raya Kav 12, Panyileukan, Kota Bandung", city: "Bandung", color: "#f59e0b", lat: -6.9338, lng: 107.6965, phone: "+62 22 7801931", email: "contact@pudak.com"},
            {name: "BONMA TEKNIK", address: "Jl. Babakan No. 31, Majasetra, Majalaya, Kab. Bandung", city: "Bandung", color: "#f59e0b", lat: -7.0482, lng: 107.7591, phone: "", email: ""},
            {name: "PT. BISMA PUTRA PERSADA", address: "Jl. Terusan Nanjung, Margasih, Kab Bandung", city: "Bandung", color: "#f59e0b", lat: -6.9365, lng: 107.5383, phone: "", email: ""},
            {name: "PT. DIRGANTARA INDONESIA", address: "Jl. Pajajaran No. 154, Husen Sastranegara, Kec. Cicendo, Kota Bandung", city: "Bandung", color: "#f59e0b", lat: -6.9054, lng: 107.5832, phone: "+62 22 6054167", email: "marketing-ptdi@indonesian-aerospace.com"},
            {name: "PT. DWITAMA MADYA PERSADA", address: "Kawasan Industri de Prima, Jl. Raya Sapan No. 07, Bojongsoang", city: "Bandung", color: "#f59e0b", lat: -6.9751, lng: 107.6482, phone: "", email: ""},
            {name: "PT. NEO PRIMA PUTRA", address: "Katapang, Kab. Bandung", city: "Bandung", color: "#f59e0b", lat: -6.9881, lng: 107.5663, phone: "", email: ""},
            {name: "PT. NUSA JAYA", address: "Kawasan Industri Primatera, Sapan, Gedebage", city: "Bandung", color: "#f59e0b", lat: -6.9554, lng: 107.6881, phone: "", email: ""},
            {name: "PT. PARAMUDA", address: "Kawasan Industri Primatera, Sapan, Gedebage", city: "Bandung", color: "#f59e0b", lat: -6.9562, lng: 107.6875, phone: "", email: ""},
            {name: "PT. DWITAMA", address: "Kawasan Industri Primatera, Sapan, Gedebage", city: "Bandung", color: "#f59e0b", lat: -6.9571, lng: 107.6892, phone: "", email: ""},
            {name: "PT. TRIMETRIK", address: "Kawasan Industri Primatera, Sapan, Gedebage", city: "Bandung", color: "#f59e0b", lat: -6.9543, lng: 107.6901, phone: "", email: ""},
            // CIMAHI
            {name: "CV. MEKAR RAHAYU ABADI", address: "Jl. Jend. Amir Machmud No. 111-115, Cibeureum", city: "Cimahi", color: "#f59e0b", lat: -6.8835, lng: 107.5412, phone: "", email: ""},
            {name: "BBPPMPV Bidang Teknik Mesin", address: "Jl. Pesantren Km 2, Cibabat, Cimahi Utara", city: "Cimahi", color: "#f59e0b", lat: -6.8692, lng: 107.5495, phone: "+62 22 6652326", email: "tedc@kemdikbud.go.id"},
            // BEKASI & CIKARANG (20)
            {name: "PT. SHINKOBE ENGINEERING (HITACHI ASTEMO)", address: "Jl. Raya Cikarang-Cibarusah No. 100, Sukaresmi, Cikarang Selatan", city: "Bekasi", color: "#3b82f6", lat: -6.3241, lng: 107.1852, phone: "", email: ""},
            {name: "PT. NUSA TOYOTETSU CORP", address: "Kawasan Industri MM2100, Jl. Irian Blok JJ, Cikarang Barat", city: "Bekasi", color: "#3b82f6", lat: -6.3015, lng: 107.1123, phone: "+62 21 8981085", email: "info@ntc.co.id"},
            {name: "PT. DANO JAYA INDONESIA", address: "Jl. Bantar Gebang Setu No. 8, Mustika Jaya", city: "Bekasi", color: "#3b82f6", lat: -6.3192, lng: 107.0051, phone: "", email: ""},
            {name: "PT. HINOKA ALSINDO TEKNIK", address: "Jl. Raya Siliwangi No. 133, Bantargebang", city: "Bekasi", color: "#3b82f6", lat: -6.2384, lng: 106.9992, phone: "", email: ""},
            {name: "PT. DERISTAMA TEKNINDO", address: "Kawasan Industri Jababeka, Cikarang", city: "Bekasi", color: "#3b82f6", lat: -6.2905, lng: 107.1702, phone: "", email: ""},
            {name: "PT. RYOSHIN UNGGUL INDONESIA", address: "Jl. Inti 3 Blok C11 No. 19, Cikarang Selatan", city: "Bekasi", color: "#3b82f6", lat: -6.3152, lng: 107.1523, phone: "", email: ""},
            {name: "PT. SEIDOTECH MANNA INDONESIA", address: "Ruko Taman Galaxy Raya Blok B No. 289 B, Jaka Setia", city: "Bekasi", color: "#3b82f6", lat: -6.2731, lng: 106.9765, phone: "", email: ""},
            {name: "PT. PRIMERA MEKA MIX", address: "Dishub Tambun, Jl. Hasanudin Km 41 No. 2 Blok E", city: "Bekasi", color: "#3b82f6", lat: -6.2495, lng: 107.0592, phone: "", email: ""},
            {name: "PT. DINAMIK ERA MASAGI", address: "Jl. Tegal Danas No. 6, Jaya Mukti, Cikarang", city: "Bekasi", color: "#3b82f6", lat: -6.3052, lng: 107.1753, phone: "", email: ""},
            {name: "PT. GLOBAL MEGA INDONESIA", address: "Jl. Jababeka III Blok C 17 No. 17, Cikarang", city: "Bekasi", color: "#3b82f6", lat: -6.2891, lng: 107.1684, phone: "", email: ""},
            {name: "PT. REIKEN QUALITY TOOLS", address: "Jl. Raya Serang-Cibarusah No. 158 A", city: "Bekasi", color: "#3b82f6", lat: -6.3352, lng: 107.1885, phone: "", email: ""},
            {name: "PT. WAHANA DUTA JAYA RUCIKA", address: "Jl. Raya Imam Bonjol Km 26, Sukadanau, Cikarang Barat", city: "Bekasi", color: "#3b82f6", lat: -6.2785, lng: 107.1456, phone: "+62 21 8901123", email: "info@rucika.co.id"},
            {name: "RIZKI CIPTA MANDIRI", address: "Jl. Kavling Tandang Mandiri Blok 4 No. 63, Setu", city: "Bekasi", color: "#3b82f6", lat: -6.3281, lng: 106.9934, phone: "", email: ""},
            {name: "BENGKEL PUTRA JAYA DRILINDO", address: "Jl. Alhusna No. 12, Jati Kramat", city: "Bekasi", color: "#3b82f6", lat: -6.2932, lng: 106.9245, phone: "", email: ""},
            {name: "PT. KREATIF MANDIRI TEKNOLOGI", address: "Jl. Raya Cicau Kawasan CCIP Blok K3 No. 6, Cikarang", city: "Bekasi", color: "#3b82f6", lat: -6.3085, lng: 107.1632, phone: "", email: ""},
            {name: "PT. MULTI JAYA MESINDOTAMA", address: "Jl. Tegal Danas No. 11, Hegarmanah, Cikarang Tim.", city: "Bekasi", color: "#3b82f6", lat: -6.3042, lng: 107.1783, phone: "", email: ""},
            {name: "PT. PATRIOT SELARAS TEKNIK", address: "Jl. Kedaung, Cimuning, Kec. Mustika Jaya", city: "Bekasi", color: "#3b82f6", lat: -6.3245, lng: 107.0121, phone: "", email: ""},
            {name: "PT. TORAMA ASAHI MANDIRI", address: "Kawasan Industri Jababeka II Blok Gg No. 9 G", city: "Bekasi", color: "#3b82f6", lat: -6.2872, lng: 107.1714, phone: "", email: ""},
            // JAKARTA (2)
            {name: "PT. KARTIKA SIGMA INDONESIA", address: "Kawasan Industri Pulogadung Blok D No. 4, Jakarta Timur", city: "Jakarta", color: "#64748b", lat: -6.1832, lng: 106.8995, phone: "", email: ""},
            {name: "PT. TEMBAGA MULIA SEMANAN", user_note: "Fixed typo SEMANAR", address: "Jl. Daan Mogot Km 16, Kp. Semanan, Kec. Kalideres, Jakarta Barat", city: "Jakarta", color: "#64748b", lat: -6.1435, lng: 106.7102, phone: "+62 21 6190001", email: "info@tms.co.id"},
            // BOGOR (1)
            {name: "PT. BUKAKA TEKNIK UTAMA", address: "Jl. Raya Narogong Km 19.5, Cileungsi, Bogor", city: "Bogor", color: "#64748b", lat: -6.4042, lng: 106.9603, phone: "+62 21 8232323", email: "info@bukaka.com"},
            // KARAWANG (3)
            {name: "PT. RODA PRIMA LANCAR", address: "Jl. Inspeksi Tarum Barat, Ds. Parungmulya, Kec. Ciampel", city: "Karawang", color: "#8b5cf6", lat: -6.3781, lng: 107.3782, phone: "", email: ""},
            {name: "PT. JAYA INDUKSI ELEKTRIK", address: "Pinayungan, Teluk Jambe, Karawang", city: "Karawang", color: "#8b5cf6", lat: -6.3615, lng: 107.3891, phone: "", email: ""},
            {name: "PT. KIYOKUNI TECHNOLOGIES", address: "Kawasan Industri Surya Cipta, Jl. Surya Madya VI Kav 1-66, Karawang", city: "Karawang", color: "#8b5cf6", lat: -6.3785, lng: 107.3832, phone: "+62 21 8677270", email: "marketing@kiyokuni.co.id"},
            // TASIKMALAYA (19)
            {name: "BENGKEL BUBUT DEDARI JAYA", address: "Jl. Raya Mangin, Linggajaya, Kec. Mangkubumi, Kab. Tasikmalaya (Code: M5FG+VQH)", city: "Tasikmalaya", color: "#10b981", lat: -7.3451, lng: 108.1835, phone: "083831094267", email: ""},
            {name: "BENGKEL 3 SAUDARA", address: "Jl. Sambong Jaya No. 14, Sambongpari, Kec. Mangkubumi, Kab. Tasikmalaya (Code: M625+56)", city: "Tasikmalaya", color: "#10b981", lat: -7.3482, lng: 108.1883, phone: "085323858584", email: ""},
            {name: "BENGKEL BERKAH TEKNIK", address: "Jl. Setiawargi, Kota Tasikmalaya", city: "Tasikmalaya", color: "#10b981", lat: -7.3335, lng: 108.2181, phone: "", email: ""},
            {name: "BENGKEL BUBUT ACC", address: "Jl. Mayor S.L. Tobing No. 39, Tugujaya, Kec. Cihideung, Kab. Tasikmalaya (Code: M627+58)", city: "Tasikmalaya", color: "#10b981", lat: -7.3231, lng: 108.2242, phone: "0265331380", email: ""},
            {name: "BENGKEL BUBUT SYAM FAMILY", address: "Jl. Ir. H. Juanda, Linggajaya, Kec. Mangkubumi, Kab. Tasikmalaya (Code: M58X+437)", city: "Tasikmalaya", color: "#10b981", lat: -7.3275, lng: 108.2123, phone: "", email: ""},
            {name: "BENGKEL DUNAN COSTUM", address: "Jl. Gubernur Sewaka No. 100, Sambongjaya, Kec. Mangkubumi, Kab. Tasikmalaya (Code: J6P5+48)", city: "Tasikmalaya", color: "#10b981", lat: -7.3452, lng: 108.1901, phone: "", email: ""},
            {name: "BENGKEL FARID", address: "Jl. Noenoeng Tisnasaputra, Kahuripan, Kec. Tawang", city: "Tasikmalaya", color: "#10b981", lat: -7.3215, lng: 108.2205, phone: "", email: ""},
            {name: "BENGKEL LAS BERKAH MANDIRI", address: "Jl. Rasamala No. 18, Tawangsari, Kec. Tawang", city: "Tasikmalaya", color: "#10b981", lat: -7.3192, lng: 108.2191, phone: "", email: ""},
            {name: "BENGKEL LAS BUBUT EBLEH", address: "Jl. Dr. Moh. Hatta, Sukamanah, Kec. Cipedes", city: "Tasikmalaya", color: "#10b981", lat: -7.3155, lng: 108.2302, phone: "", email: ""},
            {name: "BENGKEL LAS BUBUT TOSIN", address: "Jl. Sambong Jaya (Dekat Gardu PLN)", city: "Tasikmalaya", color: "#10b981", lat: -7.3472, lng: 108.1893, phone: "", email: ""},
            {name: "BENGKEL LAS JAYA BAJA", address: "Jl. Sambong Jaya (Dekat Gardu PLN)", city: "Tasikmalaya", color: "#10b981", lat: -7.3465, lng: 108.1882, phone: "", email: ""},
            {name: "BENGKEL LAS JEJEN", address: "Jl. Gubernur Suwaka, By Pass Sambong Asam", city: "Tasikmalaya", color: "#10b981", lat: -7.3442, lng: 108.1921, phone: "", email: ""},
            {name: "BENGKEL LAS SAKURA JAYA", address: "Jl. Siliwangi No. 90, Kahuripan, Kec. Tawang", city: "Tasikmalaya", color: "#10b981", lat: -7.3205, lng: 108.2215, phone: "", email: ""},
            {name: "BENGKEL LAS SULTAN WAWA", address: "Jl. Ir. H. Djuanda (By Pass) Perempatan Bojonglimus", city: "Tasikmalaya", color: "#10b981", lat: -7.3302, lng: 108.2053, phone: "", email: ""},
            {name: "CV. MULIA ABADI", address: "Jl. Sukanagara No. 8, Kahuripan, Tawang", city: "Tasikmalaya", color: "#10b981", lat: -7.3225, lng: 108.2221, phone: "", email: ""},
            {name: "SENTRA LAS", address: "Jl. Ir. H. Juanda, Tasikmalaya", city: "Tasikmalaya", color: "#10b981", lat: -7.3262, lng: 108.2135, phone: "", email: ""},
            {name: "BENGKEL BUBUT AAN", address: "Gununggede, Kab. Tasikmalaya (Code: J645+FW)", city: "Tasikmalaya", color: "#10b981", lat: -7.3205, lng: 108.2046, phone: "085315271166", email: ""},
            {name: "PT. PERTAMINA GEOTHERMAL ENERGY", address: "Area Karaha, Kadipaten, Kab. Tasikmalaya", city: "Tasikmalaya", color: "#10b981", lat: -7.1792, lng: 108.0795, phone: "", email: ""},
            {name: "AANG AIDA", address: "Jl. Raya Rajapolah, Tasikmalaya", city: "Tasikmalaya", color: "#10b981", lat: -7.2785, lng: 108.1302, phone: "", email: ""},
            // CIAMIS (5)
            {name: "HARAPAN JAYA", address: "JL. Baru Sindangkasih, Cikoneng, Kab. Ciamis", city: "Ciamis", color: "#ec4899", lat: -7.3385, lng: 108.3552, phone: "", email: ""},
            {name: "B. LAS & BUBUT EGI JAPRA", address: "Jl. Tubagus Abdullah, Sindangkasih, Kec. Purbaru", city: "Ciamis", color: "#ec4899", lat: -7.3352, lng: 108.3521, phone: "", email: ""},
            {name: "LOST CONTROL", address: "Jl. Pamayang, Kec. Cijeungjing, Ciamis", city: "Ciamis", color: "#ec4899", lat: -7.2985, lng: 108.3802, phone: "", email: ""},
            {name: "CV MITRA TEKNIK", address: "Pasar Sindang Kasih, Cikoneng, Ciamis", city: "Ciamis", color: "#ec4899", lat: -7.3405, lng: 108.3562, phone: "", email: ""},
            {name: "LATANZA JAYA TECH", address: "Jl. Yos Sudarso No. 87, Ciamis", city: "Ciamis", color: "#ec4899", lat: -7.3282, lng: 108.3481, phone: "", email: ""},
        ];

        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        let notesVisible = false;

        function init() {
            createIndicators();
            updateProgressBar();
            updateSpeakerNotes();
            initCharts();
            
            // Initialize Leaflet map after a short delay (ensure DOM is ready)
            setTimeout(() => {
                initLeafletMap();
            }, 100);
            
            renderCompanyCards('all');
        
        // Video fullscreen function
        function openVideoFullscreen() {
            const videoWrapper = document.getElementById('videoWrapper');
            const videoFrame = document.getElementById('videoFrame');
            
            if (videoWrapper) {
                // Try fullscreen API on wrapper first
                if (videoWrapper.requestFullscreen) {
                    videoWrapper.requestFullscreen();
                } else if (videoWrapper.webkitRequestFullscreen) {
                    videoWrapper.webkitRequestFullscreen();
                } else if (videoWrapper.msRequestFullscreen) {
                    videoWrapper.msRequestFullscreen();
                } else if (videoFrame && videoFrame.requestFullscreen) {
                    videoFrame.requestFullscreen();
                }
            }
        }
        
        // Make function globally available
        window.openVideoFullscreen = openVideoFullscreen;
            
            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' || e.key === ' ') nextSlide();
                else if (e.key === 'ArrowLeft') prevSlide();
                else if (e.key === 'n') toggleNotes();
            });
            
            // Touch/Swipe navigation for mobile
            let touchStartX = 0;
            let touchStartY = 0;
            let touchEndX = 0;
            let touchEndY = 0;
            
            const presentation = document.querySelector('.presentation');
            
            presentation.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
                touchStartY = e.changedTouches[0].screenY;
            }, { passive: true });
            
            presentation.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                touchEndY = e.changedTouches[0].screenY;
                handleSwipe();
            }, { passive: true });
            
            function handleSwipe() {
                // Disable swipe on mobile (screen width <= 768px)
                if (window.innerWidth <= 768) return;

                const diffX = touchStartX - touchEndX;
                const diffY = touchStartY - touchEndY;
                const threshold = 50; // Minimum swipe distance
                
                // Only handle horizontal swipes (if horizontal movement > vertical)
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > threshold) {
                    if (diffX > 0) {
                        // Swiped left -> next slide
                        nextSlide();
                    } else {
                        // Swiped right -> previous slide
                        prevSlide();
                    }
                }
            }
        }

        function renderCompanyCards(filter) {
            const container = document.getElementById('companyCards');
            container.innerHTML = '';
            const filtered = filter === 'all' ? companies : companies.filter(c => c.city.toLowerCase().includes(filter.toLowerCase()));
            filtered.forEach((company) => {
                const card = document.createElement('div');
                card.className = 'company-card';
                // Remove Code from display address
                const displayAddress = company.address.replace(/\s*\(Code:.*?\)/, '');
                card.innerHTML = `<h5><span class="marker" style="background: ${company.color}"></span>${company.name}</h5><p>${displayAddress}</p><span class="badge" style="background: ${company.color}22; color: ${company.color}">${company.city}</span>`;
                card.onclick = () => selectCompany(company, card);
                container.appendChild(card);
            });
        }

        function filterCompanies(region) {
            // Update active tab
            document.querySelectorAll('#mapTabs .region-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            // Render company cards for selected region
            renderCompanyCards(region);
            
            // Update Leaflet map with markers for selected region
            updateMapMarkers(region);
        }

        // Leaflet map variables
        let leafletMap = null;
        let markersLayer = null;
        let mapInitialized = false;

        function initLeafletMap() {
            if (mapInitialized) return;
            mapInitialized = true;
            
            const mapContainer = document.getElementById('leafletMap');
            if (!mapContainer) return;
            
            // Initialize map centered on Jawa Barat
            // Enable touch interactions on mobile as requested
            leafletMap = L.map('leafletMap', {
                center: [-6.9, 107.5],
                zoom: 8,
                zoomControl: true,
                attributionControl: false,
                dragging: true,
                tap: true,
                touchZoom: true,
                scrollWheelZoom: true,
                doubleClickZoom: true
            });
            
            // Add OpenStreetMap tiles with faster loading options
            const tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; OpenStreetMap',
                maxZoom: 18,
                updateWhenIdle: true,
                updateWhenZooming: false
            }).addTo(leafletMap);
            
            // Hide loader when first tiles load
            tileLayer.on('load', function() {
                const loader = document.getElementById('mapLoader');
                if (loader) loader.style.display = 'none';
            });
            
            // Also hide after timeout as fallback
            setTimeout(() => {
                const loader = document.getElementById('mapLoader');
                if (loader) loader.style.display = 'none';
            }, 3000);
            
            // Create markers layer group
            markersLayer = L.layerGroup().addTo(leafletMap);
            
            // Add all company markers initially
            updateMapMarkers('all');
            
            // Force immediate size update
            setTimeout(() => leafletMap.invalidateSize(), 50);
            setTimeout(() => leafletMap.invalidateSize(), 200);
            setTimeout(() => leafletMap.invalidateSize(), 500);
            setTimeout(() => leafletMap.invalidateSize(), 1000);
            
            // Handle window resize
            window.addEventListener('resize', () => {
                if (leafletMap) leafletMap.invalidateSize();
            });
        }
        
        // Refresh map when slide becomes visible - more aggressive
        function refreshMapOnSlide() {
            if (leafletMap) {
                // Multiple invalidations to ensure tiles load
                leafletMap.invalidateSize();
                setTimeout(() => {
                    leafletMap.invalidateSize();
                    leafletMap.setView([-6.9, 107.5], 8);
                }, 100);
                setTimeout(() => leafletMap.invalidateSize(), 300);
                setTimeout(() => leafletMap.invalidateSize(), 600);
                setTimeout(() => {
                    leafletMap.invalidateSize();
                    // Force tile redraw
                    leafletMap.eachLayer(layer => {
                        if (layer.redraw) layer.redraw();
                    });
                }, 1000);
            } else {
                initLeafletMap();
            }
        }

        function updateMapMarkers(region) {
            if (!leafletMap || !markersLayer) return;
            
            // Clear existing markers
            markersLayer.clearLayers();
            
            // Filter companies
            const filtered = region === 'all' ? companies : companies.filter(c => c.city.toLowerCase().includes(region.toLowerCase()));
            
            // Add markers for each company
            const bounds = [];
            filtered.forEach(company => {
                if (company.lat && company.lng) {
                    // Create custom icon with company color
                    const icon = L.divIcon({
                        className: 'custom-marker',
                        html: `<div style="background: ${company.color}; width: 14px; height: 14px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);"></div>`,
                        iconSize: [18, 18],
                        iconAnchor: [9, 9]
                    });
                    
                    const phone = company.phone ? `<div>üìû ${company.phone}</div>` : '';
                    const email = company.email ? `<div>‚úâÔ∏è ${company.email}</div>` : '';
                    
                    // Keep code in popup if needed, or remove. User said "HANYA DIPAKAI UNTUK LOKASI MAPS".
                    // I'll show the full address in popup as it's useful there, but maybe the user meant ONLY for the PIN interaction.
                    // Given "JANGAN TAMPILKAN CODE LOKASI PADA DATA TABEL", I will assume it's OK in popup or map internal logic.
                    // Actually, let's keep the popup clean too.
                    const displayAddress = company.address.replace(/\s*\(Code:.*?\)/, '');

                    // Use Plus Code for Google Maps Query if available, otherwise lat/lng
                    const plusCodeMatch = company.address.match(/\(Code: (.*?)\)/);
                    const mapQuery = plusCodeMatch ? plusCodeMatch[1] + ' ' + company.city : `${company.lat},${company.lng}`;

                    const marker = L.marker([company.lat, company.lng], {icon: icon})
                        .bindPopup(`
                            <div style="min-width: 200px; font-family: 'Inter', sans-serif;">
                                <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(mapQuery)}" target="_blank" rel="noopener" style="color: #1e40af; font-weight: 700; text-decoration: none; font-size: 0.95rem; display: block; margin-bottom: 4px;">
                                    üìç ${company.name}
                                </a>
                                <p style="color: #475569; font-size: 0.8rem; margin: 4px 0;">${displayAddress}</p>
                                <div style="margin-top: 6px; font-size: 0.75rem; color: #334155;">
                                    ${phone}
                                    ${email}
                                </div>
                                <span style="display: inline-block; margin-top: 6px; background: ${company.color}22; color: ${company.color}; padding: 2px 8px; border-radius: 10px; font-size: 0.75rem; font-weight: 600;">${company.city}</span>
                            </div>
                        `)
                        .addTo(markersLayer);
                    
                    bounds.push([company.lat, company.lng]);
                }
            });
            
            // Fit map to bounds of markers
            if (bounds.length > 0) {
                if (region === 'all') {
                    leafletMap.setView([-6.9, 107.5], 9);
                } else {
                    const latLngBounds = L.latLngBounds(bounds);
                    leafletMap.fitBounds(latLngBounds, {padding: [50, 50], maxZoom: 14});
                }
            }
        }

        // Render company tables dynamically from data
        function renderCompanyTables() {
            // Update Headers with larger font
            document.querySelectorAll('.data-table thead tr').forEach(tr => {
                tr.innerHTML = '<th style="width: 5%; font-size: 1.1rem;">No</th><th style="width: 30%; font-size: 1.1rem;">Nama Perusahaan</th><th style="width: 40%; font-size: 1.1rem;">Alamat</th><th style="width: 25%; font-size: 1.1rem;">Kontak</th>';
            });
            
            // Increase base font size for tables
            document.querySelectorAll('.data-table').forEach(table => {
                table.style.fontSize = '0.95rem';
                table.style.lineHeight = '1.4';
            });

            const mapping = {
                'Bandung': 'bandung', 'Cimahi': 'bandung',
                'Bekasi': 'bekasi', 'Jakarta': 'bekasi', 'Bogor': 'bekasi',
                'Tasikmalaya': 'tasik',
                'Ciamis': 'ciamis',
                'Karawang': 'karawang'
            };

            // Clear all tbodies first
            document.querySelectorAll('.company-tab-content tbody').forEach(tbody => tbody.innerHTML = '');

            companies.forEach((company) => {
                let tabKey = mapping[company.city];
                // Fallback logic
                if (!tabKey) {
                    if (['Bandung', 'Cimahi'].includes(company.city)) tabKey = 'bandung';
                    else if (['Bekasi', 'Jakarta', 'Bogor', 'Cikarang'].includes(company.city)) tabKey = 'bekasi';
                    else if (company.city === 'Tasikmalaya') tabKey = 'tasik';
                    else if (company.city === 'Ciamis') tabKey = 'ciamis';
                    else if (company.city === 'Karawang') tabKey = 'karawang';
                }
                
                if (!tabKey) return;
                
                const tbody = document.querySelector(`#tab-${tabKey} tbody`);
                if (!tbody) return;

                const row = document.createElement('tr');
                let contactHTML = '';
                if (company.phone) contactHTML += `<div>üìû ${company.phone}</div>`;
                if (company.email) contactHTML += `<div>‚úâÔ∏è ${company.email}</div>`;
                if (!contactHTML) contactHTML = '<span style="color: #64748b;">-</span>';
                
                // Remove Code from table display
                const displayAddress = company.address.replace(/\s*\(Code:.*?\)/, '');

                row.innerHTML = `
                    <td style="font-size: 1rem;">${tbody.children.length + 1}</td>
                    <td style="font-weight: 600; font-size: 1rem;">${company.name}</td>
                    <td style="font-size: 0.95rem;">${displayAddress}</td>
                    <td style="font-size: 0.85rem;">${contactHTML}</td>
                `;
                tbody.appendChild(row);
            });

            // Update tab counts
             for (const [key, value] of Object.entries({
                'bandung': 'Bandung & Cimahi',
                'bekasi': 'Bekasi & Sekitarnya',
                'tasik': 'Tasikmalaya',
                'ciamis': 'Ciamis',
                'karawang': 'Karawang'
            })) {
                const tbody = document.querySelector(`#tab-${key} tbody`);
                if (tbody) {
                    const tabs = document.querySelectorAll('.region-tab');
                    tabs.forEach(btn => {
                        if (btn.getAttribute('onclick') && btn.getAttribute('onclick').includes(key)) {
                            // Try to get icon
                            const match = btn.innerText.match(/^([^\w\s]|[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-./:;<=>?@[\]^`{|}~])\s/);
                            const icon = match ? match[1] : 'üìç';
                            btn.innerText = `${icon} ${value} (${tbody.children.length})`;
                        }
                    });
                }
            }
        }

        // Tab switching for company list slide with pagination
        const tablePagination = {};
        const ROWS_PER_PAGE = 10;
        
        function showCompanyTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.company-tab-content').forEach(tab => tab.style.display = 'none');
            // Show selected tab
            const tabElement = document.getElementById('tab-' + tabName);
            tabElement.style.display = 'block';
            // Update active button
            document.querySelectorAll('#companyTabs .region-tab').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) event.target.classList.add('active');
            
            // Initialize pagination for this tab if not already done
            if (!tablePagination[tabName]) {
                tablePagination[tabName] = { currentPage: 1 };
            }
            paginateTable(tabName);
        }
        
        function paginateTable(tabName) {
            const tabElement = document.getElementById('tab-' + tabName);
            const tbody = tabElement.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));
            const totalRows = rows.length;
            const totalPages = Math.ceil(totalRows / ROWS_PER_PAGE);
            const currentPage = tablePagination[tabName].currentPage;
            
            // Hide all rows
            rows.forEach(row => row.style.display = 'none');
            
            // Show only current page rows
            const startIdx = (currentPage - 1) * ROWS_PER_PAGE;
            const endIdx = Math.min(startIdx + ROWS_PER_PAGE, totalRows);
            for (let i = startIdx; i < endIdx; i++) {
                rows[i].style.display = '';
            }
            
            // Update or create pagination controls
            let pagination = tabElement.querySelector('.table-pagination');
            if (!pagination) {
                pagination = document.createElement('div');
                pagination.className = 'table-pagination';
                tabElement.appendChild(pagination);
            }
            
            if (totalPages > 1) {
                pagination.innerHTML = `
                    <button class="page-btn" onclick="changePage('${tabName}', -1)" ${currentPage === 1 ? 'disabled' : ''}>‚Üê</button>
                    <span class="page-info">Halaman ${currentPage} dari ${totalPages}</span>
                    <button class="page-btn" onclick="changePage('${tabName}', 1)" ${currentPage === totalPages ? 'disabled' : ''}>‚Üí</button>
                `;
            } else {
                pagination.innerHTML = `<span class="page-info">Total ${totalRows} perusahaan</span>`;
            }
        }
        
        function changePage(tabName, direction) {
            const tbody = document.querySelector('#tab-' + tabName + ' tbody');
            const totalRows = tbody.querySelectorAll('tr').length;
            const totalPages = Math.ceil(totalRows / ROWS_PER_PAGE);
            
            let newPage = tablePagination[tabName].currentPage + direction;
            if (newPage >= 1 && newPage <= totalPages) {
                tablePagination[tabName].currentPage = newPage;
                paginateTable(tabName);
            }
        }

        function selectCompany(company, cardElement) {
            document.querySelectorAll('.company-card').forEach(c => c.classList.remove('selected'));
            cardElement.classList.add('selected');
            
            // Focus on selected company in Leaflet map
            if (leafletMap && company.lat && company.lng) {
                leafletMap.setView([company.lat, company.lng], 15);
                
                // Open popup for this company
                markersLayer.eachLayer(layer => {
                    if (layer.getLatLng().lat === company.lat && layer.getLatLng().lng === company.lng) {
                        layer.openPopup();
                    }
                });
            }
        }

        // Video player functions
        function playVideo() {
            const video = document.getElementById('profileVideo');
            const overlay = document.getElementById('playOverlay');
            if (video) {
                video.play();
                if (overlay) overlay.style.display = 'none';
            }
        }

        // Handle video events
        document.addEventListener('DOMContentLoaded', function() {
            const video = document.getElementById('profileVideo');
            const overlay = document.getElementById('playOverlay');
            
            if (video && overlay) {
                video.addEventListener('play', () => overlay.style.display = 'none');
                video.addEventListener('pause', () => overlay.style.display = 'flex');
                video.addEventListener('ended', () => overlay.style.display = 'flex');
            }
        });

        function createIndicators() {
            const container = document.getElementById('slideIndicator');
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = `indicator-dot ${i === 0 ? 'active' : ''}`;
                dot.onclick = () => goToSlide(i);
                container.appendChild(dot);
            }
        }

        function updateIndicators() { document.querySelectorAll('.indicator-dot').forEach((dot, i) => { dot.className = `indicator-dot ${i === currentSlide ? 'active' : ''}`; }); }
        function updateProgressBar() { document.getElementById('progressBar').style.width = `${((currentSlide + 1) / totalSlides) * 100}%`; }
        function updateSpeakerNotes() { document.getElementById('notesContent').textContent = slides[currentSlide].dataset.notes || ''; }
        
        // Count-up animation for stat values
        function animateCountUp(element, target, duration = 1500) {
            const start = 0;
            const startTime = performance.now();
            const isDecimal = String(target).includes('.');
            const isPercentage = String(element.textContent).includes('%');
            
            function easeOutQuart(t) {
                return 1 - Math.pow(1 - t, 4);
            }
            
            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easedProgress = easeOutQuart(progress);
                const current = start + (target - start) * easedProgress;
                
                if (isDecimal) {
                    element.textContent = current.toFixed(1) + (isPercentage ? '%' : '');
                } else {
                    element.textContent = Math.floor(current) + (isPercentage ? '%' : '');
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    element.textContent = target + (isPercentage ? '%' : '');
                }
            }
            
            requestAnimationFrame(update);
        }
        
        function animateSlideStats(slideIndex) {
            const slide = slides[slideIndex];
            const statValues = slide.querySelectorAll('.stat-value');
            
            statValues.forEach(el => {
                const text = el.textContent.trim();
                const numericValue = parseFloat(text.replace('%', '').replace(',', '.'));
                
                if (!isNaN(numericValue)) {
                    el.dataset.target = numericValue;
                    el.dataset.hasPercent = text.includes('%') ? 'true' : 'false';
                    
                    // Start animation
                    animateCountUp(el, numericValue, 1500);
                }
            });
            
            // Also animate closing stat values
            const closingStats = slide.querySelectorAll('.closing-stat-value');
            closingStats.forEach(el => {
                const text = el.textContent.trim();
                const numericValue = parseFloat(text.replace('%', '').replace(',', '.'));
                
                if (!isNaN(numericValue)) {
                    animateCountUp(el, numericValue, 1500);
                }
            });
        }
        
        function goToSlide(index) { 
            slides[currentSlide].classList.remove('active'); 
            currentSlide = index; 
            slides[currentSlide].classList.add('active'); 
            updateIndicators(); 
            updateProgressBar(); 
            updateSpeakerNotes();
            
            // Trigger count-up animation for new slide
            setTimeout(() => animateSlideStats(currentSlide), 300);
            
            // Trigger chart animation for new slide
            setTimeout(() => animateChartsOnSlide(currentSlide), 200);
            
            // Refresh map when entering map slide (slide index 8)
            if (currentSlide === 8) {
                setTimeout(() => refreshMapOnSlide(), 150);
            }
        }
        function nextSlide() { if (currentSlide < totalSlides - 1) goToSlide(currentSlide + 1); }
        function prevSlide() { if (currentSlide > 0) goToSlide(currentSlide - 1); }
        function toggleNotes() { notesVisible = !notesVisible; document.getElementById('speakerNotes').className = `speaker-notes ${notesVisible ? 'visible' : ''}`; }

        // Store chart instances for animation reset
        let chartInstances = {};

        function initCharts() {
            // Detect mobile for responsive chart options
            const isMobile = window.innerWidth <= 768;
            const isSmallMobile = window.innerWidth <= 480;
            
            // Animation settings
            const chartAnimation = {
                duration: 1500,
                easing: 'easeOutQuart',
                delay: (context) => context.dataIndex * 100
            };

            // Responsive legend and font sizes - INCREASED for better visibility
            const legendFontSize = isSmallMobile ? 11 : (isMobile ? 12 : 14);
            const datalabelFontSize = isSmallMobile ? 12 : (isMobile ? 14 : 16);
            const legendPosition = isMobile ? 'bottom' : 'right';

            // 3D-like options with datalabels and animation
            const doughnut3DOptions = {
                responsive: true, 
                maintainAspectRatio: false,
                cutout: isMobile ? '45%' : '55%',
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 1500,
                    easing: 'easeOutQuart'
                },
                plugins: {
                    legend: { 
                        position: legendPosition, 
                        labels: { 
                            color: '#f8fafc', 
                            font: { size: legendFontSize, weight: '500' }, 
                            padding: isMobile ? 8 : 12, 
                            usePointStyle: true,
                            boxWidth: isMobile ? 10 : 15
                        } 
                    },
                    datalabels: {
                        color: '#fff', 
                        font: { weight: 'bold', size: datalabelFontSize },
                        formatter: (value) => value,
                        textShadowBlur: 4, 
                        textShadowColor: 'rgba(0,0,0,0.5)',
                        display: isSmallMobile ? false : true
                    }
                },
                elements: { arc: { borderWidth: isMobile ? 2 : 3, borderColor: '#0f172a', hoverOffset: isMobile ? 8 : 15 } }
            };

            const bar3DOptions = {
                responsive: true, 
                maintainAspectRatio: false, 
                indexAxis: 'y',
                animation: {
                    duration: 1500,
                    easing: 'easeOutQuart',
                    delay: (context) => context.dataIndex * 150
                },
                plugins: {
                    legend: { display: false },
                    datalabels: { 
                        anchor: 'center', 
                        align: 'center', 
                        color: '#fff', 
                        font: { weight: 'bold', size: datalabelFontSize - 1 }, 
                        formatter: (value) => value, 
                        textShadowBlur: 3, 
                        textShadowColor: 'rgba(0,0,0,0.5)',
                        display: isSmallMobile ? false : true
                    }
                },
                scales: {
                    x: { 
                        ticks: { color: '#94a3b8', font: { size: isMobile ? 9 : 11 } }, 
                        grid: { color: 'rgba(148,163,184,0.1)' } 
                    },
                    y: { 
                        ticks: { color: '#f8fafc', font: { size: isMobile ? 9 : 11 } }, 
                        grid: { display: false } 
                    }
                },
                barThickness: isMobile ? 18 : 28
            };

            // Career Chart (3D Doughnut)
            chartInstances.careerChart = new Chart(document.getElementById('careerChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Bekerja (90.8%)', 'Kuliah (6.4%)', 'Wirausaha (2.8%)'],
                    datasets: [{ data: [128, 9, 4], backgroundColor: ['#1e40af', '#10b981', '#f59e0b'], borderWidth: 4, borderColor: '#0f172a', hoverBorderWidth: 2, hoverBorderColor: '#fff' }]
                },
                options: doughnut3DOptions
            });

            // Region Chart (3D Bar)
            chartInstances.regionChart = new Chart(document.getElementById('regionChart'), {
                type: 'bar',
                data: {
                    labels: ['Tasikmalaya', 'Bandung', 'Cikarang', 'Karawang', 'Lainnya'],
                    datasets: [{ data: [60, 49, 14, 8, 10], backgroundColor: ['#10b981', '#f59e0b', '#3b82f6', '#8b5cf6', '#64748b'], borderRadius: 8, borderSkipped: false, barThickness: 28 }]
                },
                options: bar3DOptions
            });

            // Readiness Chart (3D Doughnut)
            chartInstances.readinessChart = new Chart(document.getElementById('readinessChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Sudah Rencana (84.4%)', 'Belum (15.6%)'],
                    datasets: [{ data: [119, 22], backgroundColor: ['#10b981', '#ef4444'], borderWidth: 4, borderColor: '#0f172a' }]
                },
                options: doughnut3DOptions
            });

            // Competency Chart (3D Bar)
            chartInstances.competencyChart = new Chart(document.getElementById('competencyChart'), {
                type: 'bar',
                data: {
                    labels: ['Bubut Konvensional', 'Frais Konvensional', 'CNC Bubut', 'Fabrikasi/Las', 'Desain Gambar', 'Multi-skill'],
                    datasets: [{ data: [103, 8, 5, 5, 4, 16], backgroundColor: ['#f59e0b', '#fbbf24', '#fcd34d', '#fde68a', '#fef3c7', '#d97706'], borderRadius: 8, barThickness: 22 }]
                },
                options: bar3DOptions
            });

            // Accommodation Chart (3D Doughnut) - title handled in HTML
            chartInstances.accommodationChart = new Chart(document.getElementById('accommodationChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Ngekost (50.4%)', 'Rumah Orangtua (42.5%)', 'Saudara (4.3%)', 'Mess (2.1%)'],
                    datasets: [{ data: [71, 60, 6, 3], backgroundColor: ['#f59e0b', '#10b981', '#3b82f6', '#8b5cf6'], borderWidth: 4, borderColor: '#0f172a' }]
                },
                options: doughnut3DOptions
            });

            // Transport Chart (3D Doughnut) - title handled in HTML
            chartInstances.transportChart = new Chart(document.getElementById('transportChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Mandiri (48.9%)', 'Diantar Orangtua (28.4%)', 'Lokal (13.5%)', 'Sekolah (5.7%)', 'Pribadi (2.8%)'],
                    datasets: [{ data: [69, 40, 19, 8, 4], backgroundColor: ['#3b82f6', '#10b981', '#64748b', '#f59e0b', '#8b5cf6'], borderWidth: 4, borderColor: '#0f172a' }]
                },
                options: doughnut3DOptions
            });
        }

        // Reset chart animations when slide becomes active
        function animateChartsOnSlide(slideIndex) {
            const slide = slides[slideIndex];
            const canvases = slide.querySelectorAll('canvas');
            
            canvases.forEach(canvas => {
                const chartId = canvas.id;
                if (chartInstances[chartId]) {
                    const chart = chartInstances[chartId];
                    
                    // Store original data
                    const originalData = chart.data.datasets.map(ds => [...ds.data]);
                    
                    // Set data to zero for animation start
                    chart.data.datasets.forEach(ds => {
                        ds.data = ds.data.map(() => 0);
                    });
                    chart.update('none'); // Update without animation
                    
                    // Restore original data with animation
                    setTimeout(() => {
                        chart.data.datasets.forEach((ds, i) => {
                            ds.data = originalData[i];
                        });
                        chart.update('default'); // Update with animation
                    }, 50);
                }
            });
        }

        // Initialize pagination for first visible tab on load
        tablePagination['bandung'] = { currentPage: 1 };
        renderCompanyTables();
        paginateTable('bandung');
        
        init();
    </script>
</body>
</html>
